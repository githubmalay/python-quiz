<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Python Quiz</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        /* --- Monotonous Dark Theme --- */
        :root {
            --bg-color: #0d1117;
            --main-color: #161b22;
            --primary-color: #58a6ff;
            --primary-hover: #79c0ff;
            --text-color: #c9d1d9;
            --light-text: #8b949e;
            --correct-color: #3fb950;
            --incorrect-color: #f85149;
            --border-color: #30363d;
            --shadow-color: rgba(0, 0, 0, 0.4);
            --btn-bg: #21262d;
            --btn-border: #30363d;
            --explanation-bg: #1c2128;
            --gold-color: #f0b83f;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            padding: 20px;
            transition: background-color 0.3s ease, color 0.3s ease;
            background-image: radial-gradient(circle at 1px 1px, var(--border-color) 1px, transparent 0);
            background-size: 25px 25px;
        }

        .container {
            background-color: var(--main-color);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 40px var(--shadow-color);
            width: 100%;
            max-width: 800px;
            margin-top: 50px;
            overflow: hidden;
            transition: all 0.4s ease;
        }
        
        /* --- General Headers --- */
        .page-header {
            padding: 30px 40px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .page-header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 5px;
        }
        
        .page-header h1 span {
            color: var(--primary-color);
            font-weight: 700;
        }
        
        .page-header p {
            color: var(--light-text);
            font-size: 1.1rem;
        }


        /* --- Welcome Screen --- */
        #welcome-container {
            padding: 40px;
            text-align: center;
            animation: fadeIn 0.6s ease-in-out;
        }

        #name-input {
            width: 100%;
            max-width: 400px;
            padding: 15px;
            font-size: 1rem;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            margin-top: 20px;
            margin-bottom: 25px;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        #name-input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.3);
        }
        
        /* --- Dashboard --- */
        #dashboard-container .content, #ranking-container .content {
            padding: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: var(--btn-bg);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .stat-card h3 {
            color: var(--light-text);
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .stat-card p {
            color: var(--primary-hover);
            font-size: 1.8rem;
            font-weight: 700;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 20px;
            text-align: left;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .achievement-badge {
            background-color: var(--btn-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            opacity: 0.4;
            filter: grayscale(100%);
            transition: all 0.3s ease;
        }
        
        .achievement-badge.unlocked {
            opacity: 1;
            filter: grayscale(0%);
            border-color: var(--gold-color);
            box-shadow: 0 0 15px rgba(240, 184, 63, 0.2);
        }

        .achievement-badge .icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .achievement-badge.unlocked .icon {
            color: var(--gold-color);
        }

        .achievement-badge h4 {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-color);
        }

        .achievement-badge p {
            font-size: 0.8rem;
            color: var(--light-text);
        }
        
        #chart-container {
            margin-top: 30px;
        }

        /* --- Topic Selection --- */
        #topic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            padding: 30px;
        }

        .topic-btn {
            font-family: 'Inter', sans-serif;
            background-color: var(--btn-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 20px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
        }

        .topic-btn:hover {
            background-color: var(--primary-color);
            color: #fff;
            border-color: var(--primary-color);
            transform: translateY(-5px);
            box-shadow: 0 8px 20px -3px rgba(88, 166, 255, 0.2);
        }
        
        /* --- Ranking Screen --- */
        #ranking-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        #ranking-table th, #ranking-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        #ranking-table th {
            color: var(--primary-color);
            font-weight: 600;
        }
        #ranking-table tr:last-child td {
            border-bottom: none;
        }
        #ranking-table .rank-1 {
            color: var(--gold-color);
            font-weight: bold;
        }

        /* --- Quiz Screen --- */
        .quiz-header {
            padding: 25px 30px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: center; align-items: center;
        }

        #question-counter { font-size: 1rem; color: var(--light-text); font-weight: 500; }

        #question {
            font-size: 1.4rem;
            font-weight: 600;
            margin: 20px 0;
            line-height: 1.6;
            padding: 0 30px;
            animation: slideIn 0.5s ease-in-out;
        }

        code {
            font-family: 'SF Mono', 'Courier New', Courier, monospace;
            background-color: var(--border-color);
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 1.1rem;
            color: var(--primary-hover);
        }

        #answer-buttons { padding: 30px; display: grid; gap: 15px; }

        .btn {
            font-family: 'Inter', sans-serif;
            background-color: var(--btn-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            padding: 18px;
            font-size: 1.05rem;
            font-weight: 500;
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s ease;
            animation: fadeIn 0.5s ease-in-out;
        }

        .btn:hover:not(:disabled) {
            border-color: var(--primary-color);
            background-color: rgba(88, 166, 255, 0.1);
            transform: scale(1.02);
        }

        .btn:disabled { cursor: not-allowed; opacity: 0.8; }
        .btn.correct { background-color: var(--correct-color); color: #fff; border-color: var(--correct-color); font-weight: 600; }
        .btn.incorrect { background-color: var(--incorrect-color); color: #fff; border-color: var(--incorrect-color); font-weight: 600; }

        #explanation-box {
            background-color: var(--explanation-bg);
            margin: 0 30px 20px;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid var(--primary-color);
            animation: fadeIn 0.5s ease;
        }

        #explanation-box h4 { margin-bottom: 10px; font-weight: 600; color: var(--primary-color); }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-25px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .controls {
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid var(--border-color);
            background-color: var(--main-color);
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .controls.single-btn {
            justify-content: flex-end;
        }

        .control-btn {
            background-image: linear-gradient(45deg, var(--primary-color), var(--primary-hover));
            color: #0d1117;
            border: none;
            padding: 14px 28px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 10px var(--shadow-color);
            flex-grow: 1;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 15px var(--shadow-color);
        }
        
        .nav-control-btn {
            background-image: none;
            background-color: var(--btn-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            flex-grow: 0;
        }

        .nav-control-btn:hover { background-color: var(--border-color); }
        
        #change-user-btn { background-color: var(--incorrect-color); color: white; border: none; }
        #change-user-btn:hover { background-color: #d6332b; }


        .hide { display: none; }

        .progress-container { padding: 25px 30px 15px; }
        .progress-bar { width: 100%; height: 10px; background-color: var(--border-color); border-radius: 5px; overflow: hidden; }
        #progress-bar-fill { height: 100%; width: 0%; background-image: linear-gradient(45deg, var(--primary-color), var(--primary-hover)); border-radius: 5px; transition: width 0.4s ease-in-out; }
        
        /* --- Report & Review Styles --- */
        #report-container .content { padding: 40px; }
        #score-summary { font-size: 2.8rem; font-weight: 700; margin-bottom: 10px; color: var(--primary-color); }
        #topic-result { font-size: 1.2rem; font-weight: 500; margin-bottom: 30px; color: var(--light-text); }
        #question-review .review-item { margin-bottom: 25px; padding-bottom: 25px; border-bottom: 1px solid var(--border-color); text-align: left; }
        #question-review .review-item:last-child { border-bottom: none; }
        .review-question { font-weight: 600; margin-bottom: 15px; }
        .review-answer { padding: 12px 15px; border-radius: 8px; margin-bottom: 8px; font-size: 0.95rem; display: flex; align-items: center; }
        .review-answer::before { content: ''; min-width: 22px; min-height: 22px; margin-right: 15px; border-radius: 50%; font-size: 1rem; }
        .review-answer.user-incorrect { background-color: rgba(248, 81, 73, 0.1); border-left: 4px solid var(--incorrect-color); color: #ff9da4; }
        .review-answer.user-incorrect::before { content: '✘'; background-color: var(--incorrect-color); color: white; display: flex; justify-content: center; align-items: center; font-weight: bold; }
        .review-answer.correct-answer { background-color: rgba(63, 185, 80, 0.1); border-left: 4px solid var(--correct-color); color: #83d38e; }
        .review-answer.correct-answer::before { content: '✔'; background-color: var(--correct-color); color: white; display: flex; justify-content: center; align-items: center; font-weight: bold; }

        /* --- Achievement Notification --- */
        #achievement-toast {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--gold-color);
            color: var(--bg-color);
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            font-weight: 600;
            z-index: 2000;
            transition: bottom 0.5s ease-in-out;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        #achievement-toast.show {
            bottom: 30px;
        }

        #confetti-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1000; }

        /* --- Mobile Responsiveness --- */
        @media (max-width: 600px) {
            body { padding: 10px; align-items: normal; }
            .container { margin-top: 20px; border-radius: 15px; }
            .page-header h1 { font-size: 1.8rem; }
            #topic-grid, #dashboard-container .content, #ranking-container .content { padding: 20px; }
            .topic-btn { padding: 18px; }
            .controls { flex-direction: column; }
            .control-btn { width: 100%; }
            #question { font-size: 1.2rem; padding: 0 20px; }
            .btn { padding: 15px; font-size: 1rem; }
            #report-container .content { padding: 25px; }
        }
    </style>
</head>

<body>
    <canvas id="confetti-canvas"></canvas>
    <div id="achievement-toast"></div>

    <div class="container">
        
        <div id="welcome-container">
            <div class="page-header">
                <h1>Python Skills Challenge</h1>
                <p>Enter your name to begin your journey.</p>
            </div>
            <div class="content" style="padding: 30px; text-align: center;">
                 <input type="text" id="name-input" placeholder="Your Name" autocomplete="name">
                 <button id="start-btn" class="control-btn" style="max-width: 400px;">Start Quiz</button>
            </div>
        </div>
        
        <div id="dashboard-container" class="hide">
            <div class="page-header">
                <h1 id="dashboard-header">Welcome, <span>User</span>!</h1>
                <p>This is your personal progress dashboard.</p>
            </div>
            <div class="content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Quizzes Taken</h3>
                        <p id="stat-quizzes-taken">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Avg. Score</h3>
                        <p id="stat-avg-score">0%</p>
                    </div>
                    <div class="stat-card">
                        <h3>Best Topic</h3>
                        <p id="stat-best-topic">-</p>
                    </div>
                </div>

                <div id="chart-container">
                     <h3 class="section-title">Score History</h3>
                     <canvas id="progress-chart"></canvas>
                </div>

                <div id="achievements-container" style="margin-top: 30px;">
                    <h3 class="section-title">Achievements</h3>
                    <div id="achievements-grid" class="achievements-grid">
                        </div>
                </div>
            </div>
            <div class="controls">
                <button id="change-user-btn" class="control-btn nav-control-btn">Change User</button>
                <button id="ranking-btn" class="control-btn nav-control-btn">Rankings</button>
                <button id="go-to-topics-btn" class="control-btn">Start New Quiz</button>
            </div>
        </div>

        <div id="topic-container" class="hide">
             <div class="page-header">
                <h1>Select a Topic</h1>
                <p>Choose a category to test your knowledge.</p>
            </div>
            <div id="topic-grid"></div>
            <div class="controls single-btn">
                <button id="back-to-dashboard-btn" class="control-btn nav-control-btn">Back to Dashboard</button>
            </div>
        </div>

        <div id="ranking-container" class="hide">
            <div class="page-header">
                <h1>Personal Leaderboard</h1>
                <p>Your best scores for each topic.</p>
            </div>
            <div class="content">
                <table id="ranking-table">
                    <thead>
                        <tr><th>Rank</th><th>Topic</th><th>High Score</th><th>Date</th></tr>
                    </thead>
                    <tbody id="ranking-body">
                        </tbody>
                </table>
            </div>
            <div class="controls single-btn">
                 <button id="ranking-back-btn" class="control-btn nav-control-btn">Back to Dashboard</button>
            </div>
        </div>

        <div id="quiz-container" class="hide">
            <div class="quiz-header">
                <div id="question-counter"></div>
            </div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div id="progress-bar-fill"></div>
                </div>
            </div>
            <h2 id="question">Question text goes here</h2>
            <div id="answer-buttons"></div>
            <div id="explanation-container"></div>
            <div class="controls">
                <button id="back-btn" class="control-btn nav-control-btn">Topics</button>
                <button id="next-btn" class="control-btn hide">Next Question</button>
            </div>
        </div>

        <div id="report-container" class="hide">
            <div class="content">
                <h2 id="score-summary"></h2>
                <p id="topic-result"></p>
                <div id="question-review"></div>
            </div>
            <div class="controls">
                <button id="report-to-dashboard-btn" class="control-btn nav-control-btn">Dashboard</button>
                <button id="restart-btn" class="control-btn">Restart Topic</button>
                <button id="pdf-btn" class="control-btn">Download PDF</button>
            </div>
        </div>
    </div>

    <script>
        const allQuestions = {
            "Variables": [
                { question: "What is the correct way to assign the value `10` to a variable named `x`?", answers: [{ text: "`x <- 10`" }, { text: "`let x = 10`" }, { text: "`x = 10`", correct: true }, { text: "`10 = x`" }], explanation: "`x = 10` is the correct syntax. The variable name is on the left, followed by the assignment operator `=`, and then the value." },
                { question: "Which is a valid variable name in Python?", answers: [{ text: "`2my_var`" }, { text: "`my-var`" }, { text: "`_my_var`", correct: true }, { text: "`my var`" }], explanation: "Variable names can start with a letter or an underscore (`_`), but not a number. They cannot contain hyphens or spaces." },
                { question: "What is the output of `a = 5; A = 10; print(a)`?", answers: [{ text: "`10`" }, { text: "`5`", correct: true }, { text: "`15`" }, { text: "An error" }], explanation: "Python variable names are case-sensitive, so `a` and `A` are two different variables. The code prints the value of the lowercase `a`, which is 5." },
                { question: "How do you assign multiple values to multiple variables in one line?", answers: [{ text: "`x, y, z = 1, 2, \"hello\"`", correct: true }, { text: "`x=1; y=2; z=\"hello\"`" }, { text: "`x=y=z=1, 2, \"hello\"`" }, { text: "It's not possible" }], explanation: "Python allows multiple assignment by matching the number of variables on the left to the number of values on the right, separated by commas." },
                { question: "What is the output of `x = y = z = \"Orange\"; print(x)`?", answers: [{ text: "`Orange`", correct: true }, { text: "`(\"Orange\", \"Orange\", \"Orange\")`" }, { text: "An error" }, { text: "`x`" }], explanation: "You can assign the same value to multiple variables in one line. Here, `x`, `y`, and `z` all refer to the string \"Orange\"." },
                { question: "What is 'unpacking' a collection?", answers: [{ text: "Deleting all elements" }, { text: "Extracting values into variables", correct: true }, { text: "Zipping two lists" }, { text: "Creating a global variable" }], explanation: "Unpacking is the process of extracting values from an iterable (like a list or tuple) and assigning them to a sequence of variables." },
                { question: "Which keyword allows modification of a variable outside the current function's scope?", answers: [{ text: "`global`", correct: true }, { text: "`nonlocal`" }, { text: "`public`" }, { text: "`var`" }], explanation: "The `global` keyword is used to indicate that a variable being modified inside a function is the one from the global scope, not a new local one." },
                { question: "Code: `x = \"awesome\"; def myfunc(): x = \"fantastic\"; myfunc(); print(\"Python is \" + x)`", answers: [{ text: "`Python is fantastic`" }, { text: "`Python is awesome`", correct: true }, { text: "An error" }, { text: "`Python is `" }], explanation: "The `x` inside `myfunc` is a local variable. Modifying it does not affect the global variable `x`. The print statement uses the global `x`." },
                { question: "Code: `x = \"awesome\"; def myfunc(): global x; x = \"fantastic\"; myfunc(); print(\"Python is \" + x)`", answers: [{ text: "`Python is fantastic`", correct: true }, { text: "`Python is awesome`" }, { text: "An error" }, { text: "`Python is `" }], explanation: "Because `global x` is used, the function modifies the global variable `x`. So, its value changes to \"fantastic\" everywhere." },
                { question: "Which is NOT a legal variable name?", answers: [{ text: "`my_variable`" }, { text: "`MyVariable`" }, { text: "`_my_variable`" }, { text: "`my-variable`", correct: true }], explanation: "Variable names cannot contain hyphens (`-`) as this character is reserved for the subtraction operator." },
                { question: "What happens if you use a variable before assigning it a value?", answers: [{ text: "It defaults to `None`" }, { text: "It defaults to `0`" }, { text: "It raises a `NameError`", correct: true }, { text: "It raises a `ValueError`" }], explanation: "Python requires variables to be assigned a value before they can be accessed. Attempting to use an unassigned variable results in a `NameError`." },
                { question: "What is the PEP 8 convention for multi-word variable names?", answers: [{ text: "camelCase" }, { text: "PascalCase" }, { text: "snake_case", correct: true }, { text: "kebab-case" }], explanation: "PEP 8, Python's style guide, recommends using `snake_case` (all lowercase with underscores) for variables and function names." },
                { question: "How can you print the data type of a variable `x`?", answers: [{ text: "`print(typeOf(x))`" }, { text: "`print(x.type)`" }, { text: "`print(type(x))`", correct: true }, { text: "`print(typeof(x))`" }], explanation: "The built-in `type()` function is used to get the type of an object. For example, `type(5)` returns `<class 'int'>`." },
                { question: "What is the output of: `x = 5; x = \"John\"; print(x)`?", answers: [{ text: "`5`" }, { text: "An error" }, { text: "`John`", correct: true }, { text: "`5John`" }], explanation: "Python is dynamically typed, meaning you can change the type of data a variable holds. The last assignment to `x` was the string \"John\"." },
                { question: "What is the best description of a variable in Python?", answers: [{ text: "A container for storing data values", correct: true }, { text: "A fixed value" }, { text: "A function that returns a value" }, { text: "A fixed location in memory" }], explanation: "Variables act as labels or names that refer to objects (data values) stored in memory. They are not the containers themselves but references to the data." },
                { question: "To what value is a variable set if it's created but not assigned?", answers: [{ text: "`0`" }, { text: "`None`" }, { text: "`False`" }, { text: "This causes an error", correct: true }], explanation: "Unlike some languages, Python does not have a default value for unassigned variables. You must assign a value when or before you use it, otherwise a `NameError` is raised." },
                { question: "What does the line `x, y = y, x` do?", answers: [{ text: "Creates a copy of x and y" }, { text: "Checks if x and y are equal" }, { text: "Swaps the values of x and y", correct: true }, { text: "Assigns y to x" }], explanation: "This is a Pythonic way to swap the values of two variables without needing a temporary variable. It leverages tuple packing and unpacking." },
                { question: "Can a Python keyword (like `for` or `if`) be used as a variable name?", answers: [{ text: "Yes, if capitalized" }, { text: "No, it will cause a `SyntaxError`", correct: true }, { text: "Yes, but it's bad practice" }, { text: "Only inside a function" }], explanation: "Keywords are reserved words that have special meaning in Python's syntax. You cannot use them as identifiers (variable names, function names, etc.)." },
                { question: "What is the scope of a variable assigned inside a function?", answers: [{ text: "Global" }, { text: "Local to the function", correct: true }, { text: "Static" }, { text: "Public" }], explanation: "By default, any variable that is assigned a value inside a function is local to that function and only exists while the function is executing." },
                { question: "How do you delete a variable?", answers: [{ text: "`delete x`" }, { text: "`remove(x)`" }, { text: "`x = None`" }, { text: "`del x`", correct: true }], explanation: "The `del` keyword is used to remove a variable and its binding from the local or global namespace. Assigning `None` just changes its value." }
            ],
            "Data Types": [
                { question: "What is the data type of `x = 5`?", answers: [{ text: "`str`" }, { text: "`int`", correct: true }, { text: "`float`" }, { text: "`list`" }], explanation: "`5` is a whole number, so its type is an integer or `int`." },
                { question: "Which data type is an ordered, immutable sequence?", answers: [{ text: "`list`" }, { text: "`dict`" }, { text: "`set`" }, { text: "`tuple`", correct: true }], explanation: "Tuples are like lists, but they are immutable, meaning their contents cannot be changed after creation. They are defined with parentheses `()`." },
                { question: "What is the data type of `x = {\"name\": \"John\"}`?", answers: [{ text: "`dict`", correct: true }, { text: "`list`" }, { text: "`set`" }, { text: "`tuple`" }], explanation: "Curly braces `{}` with key-value pairs create a dictionary, or `dict`." },
                { question: "What is the result of `type(True)`?", answers: [{ text: "`boolean`" }, { text: "`int`" }, { text: "`bool`", correct: true }, { text: "`str`" }], explanation: "`True` and `False` are boolean values, and their type is `bool`." },
                { question: "Which data type stores a collection of unique items with no specific order?", answers: [{ text: "`list`" }, { text: "`tuple`" }, { text: "`set`", correct: true }, { text: "`dict`" }], explanation: "Sets are unordered collections of unique elements. Duplicates are automatically removed." },
                { question: "What is the data type of `x = 1j`?", answers: [{ text: "`int`" }, { text: "`float`" }, { text: "`complex`", correct: true }, { text: "An error" }], explanation: "A number followed by `j` is the syntax for creating an imaginary number, which is part of the `complex` data type." },
                { question: "Which of these is a mutable data type?", answers: [{ text: "`int`" }, { text: "`str`" }, { text: "`tuple`" }, { text: "`list`", correct: true }], explanation: "Mutable means the object can be changed after it is created. You can add, remove, or change elements in a list." },
                { question: "Which function converts an integer to a string?", answers: [{ text: "`string()`" }, { text: "`str()`", correct: true }, { text: "`convert.str()`" }, { text: "`to_string()`" }], explanation: "The `str()` constructor function is used to convert other data types, like integers or floats, into strings." },
                { question: "The data type `bytes` is...", answers: [{ text: "Mutable" }, { text: "Unicode characters" }, { text: "Immutable sequence of integers (0-255)", correct: true }, { text: "Contains text" }], explanation: "`bytes` objects are immutable sequences of single bytes, often used for binary data." },
                { question: "What is the data type of `x = range(6)`?", answers: [{ text: "`list`" }, { text: "`range`", correct: true }, { text: "`tuple`" }, { text: "`generator`" }], explanation: "`range()` creates an immutable sequence of numbers. While it's iterable, it's a distinct `range` type, not a list." },
                { question: "What is the data type of `None`?", answers: [{ text: "`NoneType`", correct: true }, { text: "`null`" }, { text: "`object`" }, { text: "`undefined`" }], explanation: "`None` is a special constant that represents the absence of a value. Its type is `NoneType`." },
                { question: "If `x = b\"Hello\"`, what is `type(x)`?", answers: [{ text: "`str`" }, { text: "`bytearray`" }, { text: "`bytes`", correct: true }, { text: "`memoryview`" }], explanation: "The `b` prefix before a string literal creates a `bytes` object, which stores raw bytes instead of Unicode text." },
                { question: "Which of the following creates a `frozenset`?", answers: [{ text: "`set([], frozen=True)`" }, { text: "`frozenset([1, 2, 3])`", correct: true }, { text: "`[1, 2, 3].frozen()`" }, { text: "`{1, 2, 3, frozen}`" }], explanation: "`frozenset` is an immutable version of a set. It is created using the `frozenset()` constructor." },
                { question: "What will `bool(0)` evaluate to?", answers: [{ text: "`True`" }, { text: "`False`", correct: true }, { text: "`None`" }, { text: "An error" }], explanation: "In a boolean context, `0`, empty collections (`[]`, `()`, `{}`), `None`, and empty strings `\"\"` are considered `False`." },
                { question: "What is the data type of the result of `5 / 2`?", answers: [{ text: "`int`" }, { text: "`float`", correct: true }, { text: "`complex`" }, { text: "`double`" }], explanation: "In Python 3, the standard division operator `/` always results in a `float`, even if the numbers divide evenly." },
                { question: "Which constructor creates a list?", answers: [{ text: "`list()`", correct: true }, { text: "`List()`" }, { text: "`new list`" }, { text: "`array()`" }], explanation: "The `list()` constructor can be used to create a new list. It can be empty (`list()`) or take an iterable as an argument (`list('abc')`)." },
                { question: "What type is created by `('apple',)`?", answers: [{ text: "`str`" }, { text: "`list`" }, { text: "`tuple`", correct: true }, { text: "An error" }], explanation: "This creates a tuple with a single element. The trailing comma is essential to distinguish it from just parentheses around a string." },
                { question: "What does `float('inf')` represent?", answers: [{ text: "A very large number" }, { text: "Infinity", correct: true }, { text: "A syntax error" }, { text: "The string 'inf'" }], explanation: "Python's `float` type can represent positive and negative infinity, which is useful in mathematical calculations." },
                { question: "What is a key difference between a list and a tuple?", answers: [{ text: "Lists are ordered, tuples are not." }, { text: "Lists can be changed (mutable), tuples cannot (immutable).", correct: true }, { text: "Lists use `[]`, tuples use `{}`." }, { text: "Lists can only hold numbers." }], explanation: "The most fundamental difference is mutability. Lists can be modified after creation, whereas tuples cannot be." },
                { question: "What is the data type of the keys in a dictionary?", answers: [{ text: "Only strings" }, { text: "Only integers" }, { text: "Any mutable type" }, { text: "Any immutable type", correct: true }], explanation: "Dictionary keys must be of an immutable type, like strings, numbers, or tuples. This is because the key's hash value must be constant." }
            ],
            "Lists": [
                { question: "How do you create an empty list?", answers: [{ text: "`list = []`", correct: true }, { text: "`list = ()`" }, { text: "`list = {}`" }, { text: "`list = new List()`" }], explanation: "An empty list is created using square brackets `[]`." },
                { question: "Given `my_list = [1,2,3,4,5]`, what does `my_list[1:3]` return?", answers: [{ text: "`[1, 2, 3]`" }, { text: "`[2, 3]`", correct: true }, { text: "`[2, 3, 4]`" }, { text: "`[1, 2]`" }], explanation: "Slicing extracts a part of the list. The start index (1) is inclusive, and the end index (3) is exclusive." },
                { question: "Which method adds an element to the end of a list?", answers: [{ text: "`add()`" }, { text: "`push()`" }, { text: "`append()`", correct: true }, { text: "`insert()`" }], explanation: "The `.append()` method is used to add a single item to the end of the list." },
                { question: "How to change the second item in `fruits` to `\"orange\"`?", answers: [{ text: "`fruits[2] = \"orange\"`" }, { text: "`fruits.change(1, \"orange\")`" }, { text: "`fruits[1] = \"orange\"`", correct: true }, { text: "`fruits.set(1, \"orange\")`" }], explanation: "You can change an item by accessing its index and assigning a new value. The second item is at index 1." },
                { question: "Which method removes and returns the last item from a list?", answers: [{ text: "`remove()`" }, { text: "`pop()`", correct: true }, { text: "`delete()`" }, { text: "`discard()`" }], explanation: "`.pop()` removes and returns the item at a given index. If no index is specified, it removes and returns the last item." },
                { question: "What is the output of `len([1, [2, 3], 4])`?", answers: [{ text: "`3`", correct: true }, { text: "`4`" }, { text: "`2`" }, { text: "An error" }], explanation: "`len()` counts the top-level elements in the list. The nested list `[2, 3]` is counted as one single element." },
                { question: "Which method returns the index of the first occurrence of an element?", answers: [{ text: "`.find()`" }, { text: "`.search()`" }, { text: "`.index()`", correct: true }, { text: "`.position()`" }], explanation: "The `.index()` method searches for an element and returns its index. It raises a `ValueError` if the element is not found." },
                { question: "What does the `sort()` method do to a list?", answers: [{ text: "Returns a new sorted list" }, { text: "Sorts the list in-place", correct: true }, { text: "Reverses the list" }, { text: "Checks if sorted" }], explanation: "The `.sort()` method modifies the list directly (in-place) to sort its elements. It does not return a new list." },
                { question: "Which method creates a shallow copy of a list?", answers: [{ text: "`list()` constructor" }, { text: "`.copy()` method", correct: true }, { text: "`=` operator" }, { text: "`.duplicate()` method" }], explanation: "The `.copy()` method creates a new list object with the same elements. The `=` operator only creates a new reference to the same list." },
                { question: "Code: `a = [1, 2]; b = a; b[0] = 5; print(a)`", answers: [{ text: "`[1, 2]`" }, { text: "`[5, 2]`", correct: true }, { text: "`[1, 5]`" }, { text: "An error" }], explanation: "`b = a` makes `b` refer to the *same* list as `a`. Therefore, modifying `b` also modifies `a`." },
                { question: "Which method adds all items of an iterable to the end of a list?", answers: [{ text: "`append()`" }, { text: "`merge()`" }, { text: "`extend()`", correct: true }, { text: "`concat()`" }], explanation: "`.extend()` iterates over its argument and adds each element to the list, extending the list. `.append()` would add the iterable as a single element." },
                { question: "What is the output of `[1, 2, 3] + [4, 5]`?", answers: [{ text: "`[[1,2,3], [4,5]]`" }, { text: "`[1, 2, 3, 4, 5]`", correct: true }, { text: "`[5, 7]`" }, { text: "An error" }], explanation: "The `+` operator concatenates lists, creating a new list containing all elements from both operands." },
                { question: "How do you remove the first occurrence of `5` from a list `nums`?", answers: [{ text: "`nums.pop(5)`" }, { text: "`del nums[5]`" }, { text: "`nums.remove(5)`", correct: true }, { text: "`nums.discard(5)`" }], explanation: "`.remove()` searches for the first item with the specified value and removes it. `del nums[5]` would remove the item at index 5." },
                { question: "What does `my_list.clear()` do?", answers: [{ text: "Deletes the variable" }, { text: "Removes all elements", correct: true }, { text: "Returns a copy" }, { text: "Creates an empty list" }], explanation: "The `.clear()` method removes all of the items from a list, making it empty. The list object itself still exists." },
                { question: "What does `my_list[-1]` access?", answers: [{ text: "The first element" }, { text: "The second element" }, { text: "The last element", correct: true }, { text: "An error" }], explanation: "Negative indexing in Python starts from the end of the sequence. `-1` refers to the last element, `-2` to the second to last, and so on." },
                { question: "How do you insert the number `99` at index `1` in a list `L`?", answers: [{ text: "`L.add(1, 99)`" }, { text: "`L.insert(1, 99)`", correct: true }, { text: "`L[1].insert(99)`" }, { text: "`L[1] = 99`" }], explanation: "The `.insert()` method takes two arguments: the index where the element should be inserted, and the element itself. `L[1] = 99` would replace the existing element." },
                { question: "What does `my_list.reverse()` do?", answers: [{ text: "Returns a reversed copy" }, { text: "Sorts in descending order" }, { text: "Reverses the list in-place", correct: true }, { text: "Checks if reversed" }], explanation: "The `.reverse()` method reverses the order of elements in the list in-place, meaning it modifies the original list and returns `None`." },
                { question: "How can you count the number of times `5` appears in a list `L`?", answers: [{ text: "`L.count(5)`", correct: true }, { text: "`count(L, 5)`" }, { text: "`L.find(5)`" }, { text: "`len(L, 5)`" }], explanation: "The `.count()` method returns the number of occurrences of a specified element in the list." },
                { question: "What is list comprehension?", answers: [{ text: "A way to understand lists" }, { text: "A concise way to create lists", correct: true }, { text: "A method to sort lists" }, { text: "A way to join lists" }], explanation: "List comprehension offers a shorter, more readable syntax for creating a new list based on the values of an existing iterable. e.g., `[x*x for x in range(5)]`." },
                { question: "What is the result of `['a', 'b'] * 3`?", answers: [{ text: "An error" }, { text: "`['a', 'b', 'a', 'b', 'a', 'b']`", correct: true }, { text: "`['aaa', 'bbb']`" }, { text: "`['a3', 'b3']`" }], explanation: "The `*` operator, when used with a list and an integer, performs repetition, creating a new list with the original's elements repeated." }
            ],
            "Dictionaries": [
                { question: "How do you create an empty dictionary?", answers: [{ text: "`d = []`" }, { text: "`d = {}`", correct: true }, { text: "`d = ()`" }, { text: "`d = dict.empty()`" }], explanation: "An empty dictionary is created with a pair of curly braces `{}`." },
                { question: "How do you access the value for key `'name'` in a dictionary `d`?", answers: [{ text: "`d('name')`" }, { text: "`d.value('name')`" }, { text: "`d['name']`", correct: true }, { text: "`d.fetch('name')`" }], explanation: "The standard way to access a value is using square bracket notation with the key, like `d['key']`." },
                { question: "What happens if you access a non-existent key with `d['key']`?", answers: [{ text: "Returns `None`" }, { text: "Returns `False`" }, { text: "Raises a `KeyError`", correct: true }, { text: "Adds the key" }], explanation: "Accessing a key that is not in the dictionary using square brackets will raise a `KeyError`." },
                { question: "Which method returns a default value if a key is not found?", answers: [{ text: "`get()`", correct: true }, { text: "`fetch()`" }, { text: "`find()`" }, { text: "`access()`" }], explanation: "The `.get()` method is a safer way to access keys. `d.get('key', 'default_value')` will return the default value instead of raising an error." },
                { question: "How do you add or update a key-value pair `'color': 'blue'` in `d`?", answers: [{ text: "`d.add('color', 'blue')`" }, { text: "`d['color'] = 'blue'`", correct: true }, { text: "`d.append('color': 'blue')`" }, { text: "It can't be updated" }], explanation: "Assigning a value to a key with `d['key'] = value` will add the key-value pair if the key doesn't exist, or update the value if it does." },
                { question: "Which method returns a view of all keys in a dictionary?", answers: [{ text: "`get_keys()`" }, { text: "`keys()`", correct: true }, { text: "`list_keys()`" }, { text: "`key_view()`" }], explanation: "The `.keys()` method returns a view object that displays a list of all the keys in the dictionary." },
                { question: "Which method removes and returns a key-value pair?", answers: [{ text: "`remove()`" }, { text: "`delete()`" }, { text: "`pop()`", correct: true }, { text: "`discard()`" }], explanation: "The `.pop()` method removes the specified key and returns the corresponding value. If the key is not found, it raises a `KeyError` unless a default is given." },
                { question: "What does the `.items()` method return?", answers: [{ text: "A view of (key, value) pairs", correct: true }, { text: "A list of keys" }, { text: "A list of values" }, { text: "The number of items" }], explanation: "The `.items()` method returns a view object containing tuple pairs of (key, value) for each item in the dictionary." },
                { question: "How do you find the number of pairs in a dictionary `d`?", answers: [{ text: "`d.size()`" }, { text: "`d.count()`" }, { text: "`len(d)`", correct: true }, { text: "`d.length()`" }], explanation: "The built-in `len()` function, when used on a dictionary, returns the number of key-value pairs it contains." },
                { question: "After `d.update({'b': 2})`, what is `d` if it was `{'a': 1}`?", answers: [{ text: "`{'b': 2}`" }, { text: "`{'a': 1, 'b': 2}`", correct: true }, { text: "`{'a': 1}`" }, { text: "An error" }], explanation: "The `.update()` method merges another dictionary. It adds new key-value pairs and updates existing keys." },
                { question: "Can a list be used as a dictionary key?", answers: [{ text: "Yes, always" }, { text: "No, because lists are mutable", correct: true }, { text: "Only if empty" }, { text: "Only if it contains strings" }], explanation: "Dictionary keys must be immutable. Since lists can be changed, they cannot be used as keys." },
                { question: "Which of the following can be a dictionary key?", answers: [{ text: "A list" }, { text: "A dictionary" }, { text: "A set" }, { text: "A tuple", correct: true }], explanation: "Tuples are immutable, so they are valid dictionary keys. Lists, sets, and other dictionaries are mutable and cannot be used." },
                { question: "How do you remove all items from a dictionary `d`?", answers: [{ text: "`d.delete_all()`" }, { text: "`d.clear()`", correct: true }, { text: "`del d`" }, { text: "`d = {}`" }], explanation: "The `.clear()` method removes all key-value pairs from the dictionary, leaving it empty. `del d` deletes the variable itself." },
                { question: "What does `d.popitem()` do in Python 3.7+?", answers: [{ text: "Removes a random item" }, { text: "Removes the first item" }, { text: "Removes the last inserted item", correct: true }, { text: "Removes the smallest item" }], explanation: "In Python 3.7 and later, dictionaries preserve insertion order, and `.popitem()` removes and returns the last added (LIFO) key-value pair." },
                { question: "How can you check if a key `'name'` exists in a dictionary `d`?", answers: [{ text: "`'name' in d`", correct: true }, { text: "`d.exists('name')`" }, { text: "`d.has_key('name')`" }, { text: "`d['name'] != None`" }], explanation: "The most Pythonic way to check for a key's existence is using the `in` keyword, which is fast and readable." },
                { question: "What does the `.values()` method return?", answers: [{ text: "A tuple of values" }, { text: "A view object of the values", correct: true }, { text: "A list of values" }, { text: "A generator of values" }], explanation: "The `.values()` method returns a view object that displays a list of all the values in the dictionary." },
                { question: "How do you create a dictionary from a list of tuples?", answers: [{ text: "`dict([('a', 1), ('b', 2)])`", correct: true }, { text: "`dict(('a', 1), ('b', 2))`" }, { text: "`{('a', 1), ('b', 2)}`" }, { text: "It's not possible" }], explanation: "The `dict()` constructor can accept an iterable of key-value pairs (like a list of tuples) to create a new dictionary." },
                { question: "What is the output of `len({'a': 1, 'b': 2, 'a': 3})`?", answers: [{ text: "`3`" }, { text: "`2`", correct: true }, { text: "An error" }, { text: "`1`" }], explanation: "Dictionary keys must be unique. When a key is repeated during creation, the last value assigned to it (`3` for key `'a'`) is kept. Thus, there are only two unique keys." },
                { question: "What is the purpose of `d.setdefault('key', 'default')`?", answers: [{ text: "It always sets the key to the default value." }, { text: "It returns the key's value if it exists, otherwise it sets it and returns the default.", correct: true }, { text: "It raises an error if the key exists." }, { text: "It deletes the key if it exists." }], explanation: "`.setdefault()` is useful for initializing keys. It's like `.get()`, but it also inserts the key with the default value if the key is not already in the dictionary." },
                { question: "What is dictionary comprehension?", answers: [{ text: "A method to read dictionaries." }, { text: "A compact way to process all items in a dictionary." }, { text: "A concise way to create dictionaries.", correct: true }, { text: "A way to combine dictionaries." }], explanation: "Similar to list comprehension, dictionary comprehension provides a short syntax for creating dictionaries. e.g., `{x: x**2 for x in (2, 4, 6)}`." }
            ],
            "Functions": [
                { question: "How do you define a function in Python?", answers: [{ text: "`function my_func():`" }, { text: "`def my_func():`", correct: true }, { text: "`create my_func():`" }, { text: "`define my_func():`" }], explanation: "Functions are defined using the `def` keyword, followed by the function name and parentheses `()`." },
                { question: "What keyword is used to return a value from a function?", answers: [{ text: "`yield`" }, { text: "`send`" }, { text: "`return`", correct: true }, { text: "`give`" }], explanation: "The `return` statement exits a function and optionally passes back a value to the caller." },
                { question: "A function is defined as `def greet(name):`. How do you call it?", answers: [{ text: "`greet name=\"Alice\"`" }, { text: "`call greet(\"Alice\")`" }, { text: "`greet(\"Alice\")`", correct: true }, { text: "`greet.call(\"Alice\")`" }], explanation: "To call a function, you use its name followed by parentheses containing the arguments, like `greet(\"Alice\")`." },
                { question: "What does a function with no `return` statement return?", answers: [{ text: "`0`" }, { text: "`None`", correct: true }, { text: "`True`" }, { text: "A syntax error" }], explanation: "If a function's execution completes without hitting a `return` statement, it implicitly returns `None`." },
                { question: "What does `*args` in a function definition do?", answers: [{ text: "Pass keyword arguments" }, { text: "Pass a variable number of positional arguments", correct: true }, { text: "Require keyword arguments" }, { text: "Specify a generator" }], explanation: "`*args` collects any extra positional arguments into a tuple, allowing the function to accept any number of inputs." },
                { question: "What does `**kwargs` in a function definition do?", answers: [{ text: "Pass a variable number of keyword arguments", correct: true }, { text: "Pass positional arguments" }, { text: "Specify the return type" }, { text: "Pass arguments by reference" }], explanation: "`**kwargs` collects any extra keyword arguments into a dictionary." },
                { question: "What is a recursive function?", answers: [{ text: "A function inside another" }, { text: "A function that calls itself", correct: true }, { text: "A function with no return" }, { text: "A single-argument function" }], explanation: "A recursive function is one that solves a problem by calling itself with a smaller or simpler version of the same problem." },
                { question: "In `def my_func(country=\"Norway\"):`, `country=\"Norway\"` is a...", answers: [{ text: "Required parameter" }, { text: "Keyword argument" }, { text: "Default parameter value", correct: true }, { text: "Type hint" }], explanation: "This sets a default value for the `country` parameter. If no argument is passed for `country` when the function is called, it will use \"Norway\"." },
                { question: "What is a docstring in a Python function?", answers: [{ text: "A multi-line comment" }, { text: "A string literal for documentation", correct: true }, { text: "A variable with the function's name" }, { text: "A required first line" }], explanation: "A docstring is a string literal that occurs as the first statement in a module, function, or class. It is accessible via the `__doc__` attribute and is used by tools like `help()`." },
                { question: "What does the `pass` statement do within a function?", answers: [{ text: "Stops the function" }, { text: "Acts as a placeholder; does nothing", correct: true }, { text: "Skips an iteration" }, { text: "Returns `None`" }], explanation: "`pass` is a null statement. It is used when a statement is syntactically required but you do not want any command or code to execute." },
                { question: "What is the scope of a variable defined inside a function?", answers: [{ text: "Global" }, { text: "Built-in" }, { text: "Local", correct: true }, { text: "Nonlocal" }], explanation: "Variables created inside a function are in the local scope by default, meaning they are only accessible within that function." },
                { question: "What is a lambda function?", answers: [{ text: "A multi-line, named function" }, { text: "A small anonymous function", correct: true }, { text: "A math-only function" }, { text: "A recursive function" }], explanation: "Lambda functions are small, single-expression anonymous functions. They are created with the `lambda` keyword and are often used for short, simple operations." },
                { question: "What is the output? `def f(x): return x*2; print(f(3))`", answers: [{ text: "`3`" }, { text: "`6`", correct: true }, { text: "`f(3)`" }, { text: "An error" }], explanation: "The function `f` is called with the argument `3`. It calculates `3 * 2` and returns the result, `6`, which is then printed." },
                { question: "How to call `def f(a,b,c):` with keyword arguments?", answers: [{ text: "`f(1, b=2, 3)`" }, { text: "`f(a=1, b=2, c=3)`", correct: true }, { text: "`f(1, 2, 3, a, b, c)`" }, { text: "`f({a:1, b:2, c:3})`" }], explanation: "Keyword arguments are passed using the `parameter_name=value` syntax. You can use them for all parameters to improve clarity." },
                { question: "A variable defined outside all functions is known as a...", answers: [{ text: "Local variable" }, { text: "Static variable" }, { text: "Global variable", correct: true }, { text: "Private variable" }], explanation: "A variable defined in the main body of a script is in the global scope and is accessible throughout the script, including inside functions (unless shadowed by a local variable)." },
                { question: "What does the `-> int` in `def f(x) -> int:` signify?", answers: [{ text: "The function must return `int`" }, { text: "A function annotation (type hint) for the return value", correct: true }, { text: "A syntax error" }, { text: "The function converts x to `int`" }], explanation: "This is a function annotation, commonly used as a type hint. It indicates that the function is expected to return an integer, but does not enforce it." },
                { question: "Can a function be passed as an argument to another function?", answers: [{ text: "No, only variables" }, { text: "Yes, functions are first-class objects", correct: true }, { text: "Only lambda functions" }, { text: "Only built-in functions" }], explanation: "In Python, functions are treated like any other object (like numbers or strings). They can be assigned to variables, stored in collections, and passed as arguments." },
                { question: "What is the term for a function defined inside another function?", answers: [{ text: "A sub-function" }, { text: "A nested function", correct: true }, { text: "A child function" }, { text: "An inner class" }], explanation: "A function defined inside another function is called a nested function. It has access to variables in the enclosing (outer) function's scope." },
                { question: "What is the purpose of the `nonlocal` keyword?", answers: [{ text: "To declare a global variable" }, { text: "To work with variables in the enclosing scope of a nested function", correct: true }, { text: "To prevent a variable from being modified" }, { text: "To access variables from another module" }], explanation: "`nonlocal` is used in nested functions to indicate that a variable refers to a variable in the nearest enclosing scope that is not global." },
                { question: "What must a function do to be considered a generator function?", answers: [{ text: "Return a list" }, { text: "Use the `generate` keyword" }, { text: "Use the `yield` keyword", correct: true }, { text: "Be defined with `def gen_...`" }], explanation: "A function becomes a generator function if it uses the `yield` keyword. Instead of returning once, it can yield a series of values, pausing and resuming its state between each." }
            ],
            "For Loops": [
                { question: "Which statement is used to stop a loop prematurely?", answers: [{ text: "`pass`" }, { text: "`stop`" }, { text: "`break`", correct: true }, { text: "`exit`" }], explanation: "The `break` statement immediately terminates the innermost loop it is in." },
                { question: "How do you loop through `fruits = [\"apple\", \"banana\"]`?", answers: [{ text: "`for x in fruits:`", correct: true }, { text: "`loop x in fruits:`" }, { text: "`foreach x in fruits:`" }, { text: "`for x of fruits:`" }], explanation: "The `for...in` construct is the standard way to iterate over the items of any sequence or iterable in Python." },
                { question: "What is the output of `for x in \"word\": print(x)`?", answers: [{ text: "`word`" }, { text: "`w o r d` (on separate lines)", correct: true }, { text: "`['w', 'o', 'r', 'd']`" }, { text: "An error" }], explanation: "A `for` loop can iterate directly over a string. Each iteration will process one character of the string." },
                { question: "What does `range(3)` generate?", answers: [{ text: "`1, 2, 3`" }, { text: "`0, 1, 2`", correct: true }, { text: "`0, 1, 2, 3`" }, { text: "`1, 2`" }], explanation: "`range(stop)` generates numbers from 0 up to (but not including) the `stop` value." },
                { question: "Which statement skips the rest of the current iteration and continues with the next?", answers: [{ text: "`skip`" }, { text: "`continue`", correct: true }, { text: "`next`" }, { text: "`pass`" }], explanation: "The `continue` statement rejects all the remaining statements in the current iteration of the loop and moves the control back to the top of the loop." },
                { question: "When does the `else` block in a `for` loop execute?", answers: [{ text: "When `break` is used" }, { text: "When the loop finishes normally", correct: true }, { text: "Always after the loop" }, { text: "If the loop condition is false" }], explanation: "The `else` clause executes after the loop completes its full sequence of iterations, but *not* if the loop is terminated by a `break` statement." },
                { question: "How would you loop from 5 to 9 (inclusive)?", answers: [{ text: "`for i in range(5, 9):`" }, { text: "`for i in range(5, 10):`", correct: true }, { text: "`for i in range(4, 9):`" }, { text: "`for i in range(6, 10):`" }], explanation: "With `range(start, stop)`, the sequence goes up to but does not include `stop`. To include 9, the stop value must be 10." },
                { question: "What is a nested loop?", answers: [{ text: "A loop that never ends" }, { text: "A loop inside another loop", correct: true }, { text: "A `for...else` loop" }, { text: "A special `while` loop" }], explanation: "A nested loop is a loop structure where one loop is placed inside the body of another. The inner loop executes fully for each iteration of the outer loop." },
                { question: "What is the output? `for i in range(2): for j in range(2): print((i, j))`", answers: [{ text: "`(0,0)(1,1)`" }, { text: "`(0,0)(0,1)(1,0)(1,1)`", correct: true }, { text: "`(0,1)(0,2)(1,1)(1,2)`" }, { text: "`(0,0)(1,0)(0,1)(1,1)`" }], explanation: "The outer loop runs for i=0 and i=1. For each i, the inner loop runs for j=0 and j=1, printing the pair `(i, j)` each time." },
                { question: "What does `pass` do in a `for` loop?", answers: [{ text: "Acts as a placeholder", correct: true }, { text: "Stops the loop" }, { text: "Skips the iteration" }, { text: "Is not allowed" }], explanation: "`pass` does nothing. It's used when a statement is syntactically required but no code needs to be executed, like in an empty loop body." },
                { question: "How do you loop through both keys and values of a dictionary `d`?", answers: [{ text: "`for k, v in d.items():`", correct: true }, { text: "`for k, v in d:`" }, { text: "`for k in d: v = d[k]`" }, { text: "`for k, v in d.pairs():`" }], explanation: "The `.items()` method returns key-value pairs, which can be unpacked into two loop variables (e.g., `k, v`) for easy access." },
                { question: "How can you get both the index and value while looping through a list?", answers: [{ text: "`for i, v in index(my_list):`" }, { text: "`for i, v in enumerate(my_list):`", correct: true }, { text: "`for i in range(len(my_list)):`" }, { text: "`for i, v in my_list.indexed():`" }], explanation: "The built-in `enumerate()` function adds a counter to an iterable. It returns pairs of (index, value)." },
                { question: "What is the output of `for i in range(5, 0, -2): print(i)`?", answers: [{ text: "`5 3 1`", correct: true }, { text: "`5 4 3 2 1 0`" }, { text: "`5 3`" }, { text: "Infinite loop" }], explanation: "`range(start, stop, step)` with a negative step counts down. It starts at 5 and subtracts 2 until it would pass 0." },
                { question: "What is the output? `for i in []: print('A') else: print('B')`", answers: [{ text: "It prints 'A'" }, { text: "It prints 'B'", correct: true }, { text: "It prints nothing" }, { text: "A syntax error" }], explanation: "The loop's sequence is empty, so it never runs. Because it completes without a `break`, the `else` clause is executed." },
                { question: "What is the output? `for i in [1,2]: print('A'); break else: print('B')`", answers: [{ text: "It prints 'A' once", correct: true }, { text: "It prints 'A' and 'B'" }, { text: "It prints 'A' twice" }, { text: "It prints 'A' twice and 'B'" }], explanation: "The loop starts, prints 'A', and then the `break` statement terminates it. Because it was terminated by `break`, the `else` clause is skipped." },
                { question: "How do you iterate over two lists simultaneously?", answers: [{ text: "Using nested loops" }, { text: "Using the `zip()` function", correct: true }, { text: "Using `for x, y in list1 + list2:`" }, { text: "It is not possible" }], explanation: "The `zip()` function takes multiple iterables and aggregates them, returning an iterator of tuples where the i-th tuple contains the i-th element from each of the argument sequences." },
                { question: "What is an iterable?", answers: [{ text: "An object that can be used in a `for` loop", correct: true }, { text: "A type of list" }, { text: "A function that returns a sequence" }, { text: "An object with a `.next()` method" }], explanation: "An iterable is any Python object capable of returning its members one at a time, which allows it to be used on the right-hand side of a `for` loop." },
                { question: "Can you modify a list while iterating over it?", answers: [{ text: "Yes, without any issues" }, { text: "No, it will always cause an error" }, { text: "It is risky and can lead to unexpected behavior", correct: true }, { text: "Only by using `enumerate()`" }], explanation: "Modifying a list (e.g., adding or removing elements) while iterating over it can cause strange behavior like skipping items. It's safer to iterate over a copy (`for x in my_list[:]:`)." },
                { question: "How would you create a `for` loop that runs 10 times?", answers: [{ text: "`for i in 10:`" }, { text: "`for i in range(1, 10):`" }, { text: "`for i in range(10):`", correct: true }, { text: "`for i in range(1, 11):`" }], explanation: "`range(10)` generates numbers from 0 to 9, which is a total of 10 numbers, making it the most common and concise way to loop 10 times." },
                { question: "What is the output? `for char in '_': print('loop')`", answers: [{ text: "It prints 'loop' once", correct: true }, { text: "It prints nothing" }, { text: "It prints '_' once" }, { text: "An error" }], explanation: "The string `'_'` is an iterable with one element. The loop variable `char` is assigned this character, the loop body executes once, and then the loop finishes." }
            ],
            "If...Else": [
                { question: "Which keyword is used for a multi-way branch in an if-statement?", answers: [{ text: "`else if`" }, { text: "`elif`", correct: true }, { text: "`elseif`" }, { text: "`or if`" }], explanation: "`elif` is short for 'else if' and allows you to check multiple expressions for `True` and execute a block of code as soon as one of the conditions is met." },
                { question: "Output: `a=50; b=10; if a>b: print(\"Hi\") else: print(\"Bye\")`", answers: [{ text: "`Hi`", correct: true }, { text: "`Bye`" }, { text: "Both are printed" }, { text: "Syntax Error" }], explanation: "The condition `a > b` (50 > 10) is true, so the code block inside the `if` statement is executed." },
                { question: "How do you write a one-line if statement (ternary operator)?", answers: [{ text: "`print(\"A\") if a > b else print(\"B\")`", correct: true }, { text: "`if a > b: print(\"A\") else print(\"B\")`" }, { text: "`print(\"A\" ? \"B\") if a > b`" }, { text: "Not possible in Python" }], explanation: "Python's conditional expression syntax is `<value_if_true> if <condition> else <value_if_false>`." },
                { question: "Which logical operator checks if both conditions are true?", answers: [{ text: "`or`" }, { text: "`and`", correct: true }, { text: "`both`" }, { text: "`&&`" }], explanation: "The `and` operator returns `True` only if both the left and right operands are true." },
                { question: "Output of `if 5>10: print('A') elif 5>3: print('B')`?", answers: [{ text: "`A`" }, { text: "`B`", correct: true }, { text: "`C`" }, { text: "`A` and `B`" }], explanation: "The first condition `5 > 10` is false. The program proceeds to the `elif` condition, `5 > 3`, which is true. It prints 'B' and the statement ends." },
                { question: "What does `pass` do inside an `if` block?", answers: [{ text: "Causes an error" }, { text: "Acts as a null operation", correct: true }, { text: "Stops the program" }, { text: "Is not allowed" }], explanation: "`pass` is a placeholder. It allows you to have a syntactically correct `if` block that does nothing." },
                { question: "Can you have an `if` statement inside another `if`?", answers: [{ text: "No, it's not allowed" }, { text: "Yes, this is called a nested if", correct: true }, { text: "Only if you use `elif`" }, { text: "Only one level is allowed" }], explanation: "Nesting `if` statements is common and allows for more complex logic by checking a new condition only if a prior condition was met." },
                { question: "Output? `x=10; if x>5: print(\"A\"); if x>8: print(\"B\")`", answers: [{ text: "`A`" }, { text: "`B`" }, { text: "`A` and `B`", correct: true }, { text: "Only `B`" }], explanation: "These are two separate, independent `if` statements, not an `if/elif` chain. Both conditions (`10 > 5` and `10 > 8`) are true, so both `print` statements are executed." },
                { question: "Which operator checks for non-equality?", answers: [{ text: "`<>`" }, { text: "`!=`", correct: true }, { text: "`is not`" }, { text: "`not=`" }], explanation: "The `!=` operator compares the values of two operands and returns `True` if they are not equal." },
                { question: "Is an `else` statement mandatory with an `if`?", answers: [{ text: "Yes, always" }, { text: "No, it's optional", correct: true }, { text: "Only if you have an `elif`" }, { text: "Yes, unless you use `pass`" }], explanation: "An `if` statement can exist on its own. The `elif` and `else` clauses are optional." },
                { question: "What is a 'truthy' value?", answers: [{ text: "Any value that is `True`" }, { text: "A value that evaluates to True in a boolean context", correct: true }, { text: "Only the boolean `True`" }, { text: "A string 'true'" }], explanation: "Most objects in Python are 'truthy', including non-empty strings, non-zero numbers, and non-empty collections. They evaluate to `True` when used in an `if` condition." },
                { question: "Which of these values is 'falsy'?", answers: [{ text: "`\"False\"`" }, { text: "`1`" }, { text: "`[]` (an empty list)", correct: true }, { text: "`[0]`" }], explanation: "Empty collections (lists, tuples, dicts), the number 0, `None`, and empty strings are all 'falsy', meaning they evaluate to `False` in a boolean context." },
                { question: "What does `if x:` check if `x` is an integer?", answers: [{ text: "If `x` is positive" }, { text: "If `x` is not equal to 0", correct: true }, { text: "If `x` is an even number" }, { text: "It causes a TypeError" }], explanation: "For numbers, 'truthiness' is determined by whether they are non-zero. `if 0:` is false, but `if 1:`, `if -1:`, etc., are true." },
                { question: "What is the syntax for `if NOT condition:`?", answers: [{ text: "`if ! condition:`" }, { text: "`if not condition:`", correct: true }, { text: "`if condition is not True:`" }, { text: "`unless condition:`" }], explanation: "The `not` logical operator is used to reverse the boolean value of a condition. `not True` is `False`." },
                { question: "Output? `x=5; y=5; if x is y: print(\"A\"); else: print(\"B\")`", answers: [{ text: "`A`", correct: true }, { text: "`B`" }, { text: "Depends on Python version" }, { text: "An error" }], explanation: "The `is` operator checks for object identity. Python often reuses immutable objects like small integers, so `x` and `y` point to the exact same object in memory, making `x is y` true." },
                { question: "What is the value of `x`? `x = 'A' if 10 > 5 else 'B'`", answers: [{ text: "`B`" }, { text: "`A`", correct: true }, { text: "True" }, { text: "An error" }], explanation: "This is a conditional expression (ternary operator). Since the condition `10 > 5` is true, the value before `if` ('A') is assigned to `x`." },
                { question: "Which of the following is equivalent to `if x and y:`?", answers: [{ text: "`if x: if y:`", correct: true }, { text: "`if x or y:`" }, { text: "`if x: else: if y:`" }, { text: "`if x(y):`" }], explanation: "An `and` condition is true only if both parts are true. This is logically the same as a nested `if`, where the inner `if` is only checked if the outer `if` is true." },
                { question: "What is required after the condition in an `if` or `elif` statement?", answers: [{ text: "A semicolon `;`" }, { text: "A colon `:`", correct: true }, { text: "Curly braces `{}`" }, { text: "The `then` keyword" }], explanation: "Python uses a colon `:` to signify the start of an indented code block for statements like `if`, `for`, `def`, etc." },
                { question: "Output? `if 'a' in 'banana': print(1)`", answers: [{ text: "`1`", correct: true }, { text: "`True`" }, { text: "No output" }, { text: "An error" }], explanation: "The `in` operator checks for membership. Since the character 'a' is present in the string 'banana', the condition is true, and the code block is executed." },
                { question: "What happens if an `if` statement has no indented block?", answers: [{ text: "It executes the next line" }, { text: "It does nothing" }, { text: "It raises an `IndentationError`", correct: true }, { text: "It implicitly `pass`es" }], explanation: "Python uses indentation to define code blocks. A control flow statement like `if` must be followed by an indented block, otherwise it's a syntax error." }
            ],
            "Operators": [
                { question: "Which operator is used for exponentiation?", answers: [{ text: "`^`" }, { text: "`**`", correct: true }, { text: "`pow()`" }, { text: "`exp`" }], explanation: "The `**` operator raises the left operand to the power of the right operand (e.g., `2 ** 3` is 8)." },
                { question: "What is the result of `10 // 3` (floor division)?", answers: [{ text: "`3.33`" }, { text: "`3`", correct: true }, { text: "`1`" }, { text: "`3.0`" }], explanation: "Floor division `//` performs division and then rounds the result down to the nearest whole number." },
                { question: "Which operator is used for modulus (remainder)?", answers: [{ text: "`%`", correct: true }, { text: "`mod`" }, { text: "`rem`" }, { text: "`//`" }], explanation: "The modulus operator `%` returns the remainder of a division (e.g., `10 % 3` is 1)." },
                { question: "What is `x` after `x = 5; x += 3`?", answers: [{ text: "`5`" }, { text: "`3`" }, { text: "`8`", correct: true }, { text: "`15`" }], explanation: "`x += 3` is an assignment operator, shorthand for `x = x + 3`. So, `x` becomes `5 + 3`, which is 8." },
                { question: "Which of these is a comparison operator?", answers: [{ text: "`=`" }, { text: "`<>`" }, { text: "`>=`", correct: true }, { text: "`:=`" }], explanation: "Comparison operators like `==`, `!=`, `>`, `<`, `>=`, and `<=` compare two values and return a boolean result." },
                { question: "What does the `is` operator check?", answers: [{ text: "If values are the same" }, { text: "If variables point to the same object", correct: true }, { text: "If data types are the same" }, { text: "If a variable is an instance" }], explanation: "`is` checks for object identity (if two variables refer to the exact same location in memory), while `==` checks for equality (if the values are the same)." },
                { question: "What is the output of `True and False`?", answers: [{ text: "`True`" }, { text: "`False`", correct: true }, { text: "`None`" }, { text: "An error" }], explanation: "The logical `and` operator returns `True` only if both operands are true." },
                { question: "What is the output of `not True`?", answers: [{ text: "`True`" }, { text: "`False`", correct: true }, { text: "`None`" }, { text: "An error" }], explanation: "The `not` operator reverses the boolean value of its operand." },
                { question: "Which operator has the highest precedence?", answers: [{ text: "`+` (addition)" }, { text: "`**` (exponentiation)", correct: true }, { text: "`*` (multiplication)" }, { text: "`and` (logical AND)" }], explanation: "In the order of operations, exponentiation `**` is evaluated before arithmetic operators like `*` or `+`, which are evaluated before logical operators like `and`." },
                { question: "What is the `in` operator used for?", answers: [{ text: "To check for membership in a sequence", correct: true }, { text: "Integer division" }, { text: "Object identity" }, { text: "Importing modules" }], explanation: "The `in` operator returns `True` if a specified value is found within a sequence (like a list, tuple, or string)." },
                { question: "What is the result of `5 | 3` (Bitwise OR)?", answers: [{ text: "`1`" }, { text: "`7`", correct: true }, { text: "`2`" }, { text: "`15`" }], explanation: "In binary, 5 is `101` and 3 is `011`. A bitwise OR results in `111`, which is 7 in decimal." },
                { question: "What is the result of `5 & 3` (Bitwise AND)?", answers: [{ text: "`1`", correct: true }, { text: "`7`" }, { text: "`2`" }, { text: "`15`" }], explanation: "In binary, 5 is `101` and 3 is `011`. A bitwise AND results in `001`, which is 1 in decimal." },
                { question: "What is the walrus operator `:=` used for?", answers: [{ text: "Strict comparison" }, { text: "Assigning a value within an expression", correct: true }, { text: "Bitwise negation" }, { text: "Alternative to `==`" }], explanation: "The walrus operator, introduced in Python 3.8, allows you to assign a value to a variable as part of a larger expression, often simplifying code in `if` or `while` statements." },
                { question: "What is the value of `x`? `x = 5 > 3 == True`", answers: [{ text: "`True`" }, { text: "`False`", correct: true }, { text: "`5`" }, { text: "An error" }], explanation: "Python supports operator chaining. This is evaluated as `(5 > 3) and (3 == True)`. Since `3 == True` is `False`, the whole expression is `False`." },
                { question: "What does `'a' in 'apple'` evaluate to?", answers: [{ text: "`True`", correct: true }, { text: "`False`" }, { text: "`1`" }, { text: "An error" }], explanation: "The `in` operator checks for the presence of a substring within a string. Since `'a'` is in `'apple'`, it returns `True`." },
                { question: "Which operator is used for bitwise XOR?", answers: [{ text: "`&`" }, { text: "`|`" }, { text: "`^`", correct: true }, { text: "`~`" }], explanation: "The caret `^` operator performs a bitwise XOR (exclusive OR). A bit in the result is set to 1 if the corresponding bits in the two operands are different." },
                { question: "What is the result of `2 * 3 ** 2`?", answers: [{ text: "`36`" }, { text: "`18`", correct: true }, { text: "`12`" }, { text: "`64`" }], explanation: "Due to operator precedence, exponentiation `**` is performed before multiplication `*`. So, it's calculated as `2 * (3 ** 2)`, which is `2 * 9 = 18`." },
                { question: "The `is not` operator checks for...", answers: [{ text: "Value inequality" }, { text: "Object identity inequality", correct: true }, { text: "Type mismatch" }, { text: "Membership exclusion" }], explanation: "`is not` is the inverse of `is`. It returns `True` if two variables do not point to the exact same object in memory." },
                { question: "What is the result of `5 ^ 3` (Bitwise XOR)?", answers: [{ text: "`2`" }, { text: "`7`" }, { text: "`6`", correct: true }, { text: "`1`" }], explanation: "In binary, 5 is `101` and 3 is `011`. A bitwise XOR results in `110`, which is 6 in decimal." },
                { question: "What is the output of `[1, 2] == [1, 2]` vs `[1, 2] is [1, 2]`", answers: [{ text: "Both are `True`" }, { text: "`True` and `False`", correct: true }, { text: "Both are `False`" }, { text: "`False` and `True`" }], explanation: "`==` checks if the values are equal, which they are. `is` checks if they are the same object. The two lists are separate objects in memory, so `is` returns `False`." }
            ],

            "Tuples": [
                { "question": "How do you create a tuple with only one item?", "answers": [{ "text": "`(1)`" }, { "text": "`[1,]`" }, { "text": "`(1,)`", "correct": true }, { "text": "`tuple(1)`" }], "explanation": "A single-item tuple must have a trailing comma to distinguish it from a mathematical expression in parentheses." },
                { "question": "What is the key characteristic of a tuple?", "answers": [{ "text": "They are mutable" }, { "text": "They are immutable", "correct": true }, { "text": "They are unordered" }, { "text": "They can only contain integers" }], "explanation": "Tuples are immutable, meaning once they are created, their elements cannot be changed, added, or removed." },
                { "question": "Given `t = (1, 2, 3)`, what is the result of `t[1] = 4`?", "answers": [{ "text": "`(1, 4, 3)`" }, { "text": "A `ValueError`" }, { "text": "A `TypeError`", "correct": true }, { "text": "No change, no error" }], "explanation": "Tuples do not support item assignment. Attempting to change an element will raise a `TypeError`." },
                { "question": "How do you access the last element of a tuple `my_tuple`?", "answers": [{ "text": "`my_tuple.last()`" }, { "text": "`my_tuple[len(my_tuple)]`" }, { "text": "`my_tuple[-1]`", "correct": true }, { "text": "`my_tuple[0]`" }], "explanation": "Negative indexing works for tuples just like lists. `[-1]` refers to the last item." },
                { "question": "What is tuple unpacking?", "answers": [{ "text": "Converting a tuple to a list" }, { "text": "Assigning tuple elements to multiple variables", "correct": true }, { "text": "Deleting a tuple" }, { "text": "Finding the length of a tuple" }], "explanation": "Unpacking allows you to assign the values inside a tuple to a sequence of variables in a single line, like `(a, b) = (1, 2)`." },
                { "question": "What does the `+` operator do with two tuples?", "answers": [{ "text": "Adds corresponding elements" }, { "text": "Concatenates them into a new tuple", "correct": true }, { "text": "Finds the union" }, { "text": "Raises a `TypeError`" }], "explanation": "The `+` operator creates a new tuple containing all the elements of the first tuple followed by all the elements of the second." },
                { "question": "Which of the following can a tuple NOT be used for?", "answers": [{ "text": "A key in a dictionary" }, { "text": "Returning multiple values from a function" }, { "text": "Storing elements that need frequent modification", "correct": true }, { "text": "An element in a set" }], "explanation": "Because tuples are immutable, they are unsuitable for collections of data that you need to change frequently. Lists are used for that purpose." },
                { "question": "What is the output of `len(('a', ('b', 'c')))`?", "answers": [{ "text": "`3`" }, { "text": "`2`", "correct": true }, { "text": "`4`" }, { "text": "An error" }], "explanation": "`len()` counts the top-level elements. The tuple `('b', 'c')` is a single nested element, so the count is 2." },
                { "question": "Which method finds the number of occurrences of a value in a tuple?", "answers": [{ "text": "`.count()`", "correct": true }, { "text": "`.find()`" }, { "text": "`.occurrences()`" }, { "text": "`.search()`" }], "explanation": "The `.count()` method returns the number of times a specified value appears in the tuple." },
                { "question": "Can a tuple contain a mutable object, like a list?", "answers": [{ "text": "No, it causes an error" }, { "text": "Yes, but the list inside cannot be changed" }, { "text": "Yes, and the list inside can be changed", "correct": true }, { "text": "Only if the list is empty" }], "explanation": "A tuple can contain mutable objects. While you can't change which list the tuple points to, you can modify the contents of the list itself." },
                { "question": "What is the output of `('x',) * 3`?", "answers": [{ "text": "`('xxx',)`" }, { "text": "`('x', 'x', 'x')`", "correct": true }, { "text": "`'xxx'`" }, { "text": "A `TypeError`" }], "explanation": "The `*` operator performs repetition, creating a new tuple with the elements repeated the specified number of times." },
                { "question": "What does the `my_tuple.index('a')` method do?", "answers": [{ "text": "Returns `True` if 'a' exists" }, { "text": "Returns the index of the first occurrence of 'a'", "correct": true }, { "text": "Returns all indices of 'a'" }, { "text": "Returns `-1` if 'a' is not found" }], "explanation": "The `.index()` method returns the index of the first item that matches the value. It raises a `ValueError` if the item is not found." },
                { "question": "Given `t = (10, 20, 30, 40, 50)`, what is `t[1:4]`?", "answers": [{ "text": "`(20, 30, 40)`", "correct": true }, { "text": "`(20, 30, 40, 50)`" }, { "text": "`(10, 20, 30)`" }, { "text": "`(30, 40, 50)`" }], "explanation": "Slicing a tuple works like slicing a list. It extracts elements from the start index up to (but not including) the end index." },
                { "question": "Which of these functions can be used on a tuple?", "answers": [{ "text": "`.sort()`" }, { "text": "`.append()`" }, { "text": "`.reverse()`" }, { "text": "`sorted()`", "correct": true }], "explanation": "The built-in `sorted()` function can be used. It returns a new sorted *list* from the tuple's elements, without changing the original tuple." },
                { "question": "What is the result of `(1, 2) == (2, 1)`?", "answers": [{ "text": "`True`" }, { "text": "`False`", "correct": true }, { "text": "A `SyntaxError`" }, { "text": "Sometimes `True`, sometimes `False`" }], "explanation": "Tuples are ordered collections. The `==` operator checks for equality, which requires the elements to be the same and in the same order." },
                { "question": "How do you convert the list `['a', 'b']` into a tuple?", "answers": [{ "text": "`to_tuple(['a', 'b'])`" }, { "text": "`('a', 'b')`" }, { "text": "`tuple(['a', 'b'])`", "correct": true }, { "text": "You cannot convert a list to a tuple." }], "explanation": "The `tuple()` constructor function takes an iterable (like a list) as an argument and creates a new tuple from its elements." },
                { "question": "Given `t = (1, [2, 3])`, what is the result of `t[1].append(4)`?", "answers": [{ "text": "A `TypeError` is raised" }, { "text": "The tuple `t` becomes `(1, [2, 3, 4])`", "correct": true }, { "text": "A new tuple is created" }, { "text": "The code does nothing" }], "explanation": "The tuple itself is immutable (you can't change `t[1]`), but the list object *inside* the tuple is mutable. Therefore, you can modify the list in-place." },
                { "question": "Which is a primary advantage of tuples over lists?", "answers": [{ "text": "They are more flexible" }, { "text": "They are generally more memory-efficient and can be used as dictionary keys", "correct": true }, { "text": "They have more built-in methods" }, { "text": "They are easier to create" }], "explanation": "Due to their immutability, tuples have a fixed size and hash value, making them slightly more memory-efficient and allowing them to be used in places lists cannot, like dictionary keys." },
                { "question": "How do you access the item `'c'` in the nested tuple `t = ('a', ('b', 'c'))`?", "answers": [{ "text": "`t[1][1]`", "correct": true }, { "text": "`t[2]`" }, { "text": "`t(1, 1)`" }, { "text": "`t[1, 1]`" }], "explanation": "You can chain index operators. `t[1]` accesses the inner tuple `('b', 'c')`, and `[1]` then accesses the second element of that inner tuple." },
                { "question": "What does `max((1, 5, 2, 9))` return?", "answers": [{ "text": "`1`" }, { "text": "`5`" }, { "text": "`2`" }, { "text": "`9`", "correct": true }], "explanation": "The built-in `max()` function can be used on a tuple of comparable items (like numbers or strings) to find the largest element." }
            ],
            "Sets": [
                { "question": "How do you create an empty set?", "answers": [{ "text": "`{}`" }, { "text": "`[]`" }, { "text": "`set()`", "correct": true }, { "text": "`empty_set()`" }], "explanation": "Using `{}` creates an empty dictionary. The correct way to create an empty set is with the `set()` constructor." },
                { "question": "What is the main characteristic of a set?", "answers": [{ "text": "It is ordered and mutable" }, { "text": "It contains unique, unordered elements", "correct": true }, { "text": "It is immutable and ordered" }, { "text": "It uses key-value pairs" }], "explanation": "Sets are collections that are both unordered and only store unique elements (duplicates are automatically removed)." },
                { "question": "What is the output of `s = {1, 2, 2, 3}; print(s)`?", "answers": [{ "text": "`{1, 2, 2, 3}`" }, { "text": "`{1, 2, 3}`", "correct": true }, { "text": "`{3, 2, 1}`" }, { "text": "Output order is not guaranteed" }], "explanation": "Sets automatically discard duplicate values. The resulting set will contain only one `2`. The order is not guaranteed." },
                { "question": "Which method adds an element to a set?", "answers": [{ "text": "`.append()`" }, { "text": "`.insert()`" }, { "text": "`.add()`", "correct": true }, { "text": "`.push()`" }], "explanation": "The `.add()` method is used to add a single element to a set. If the element is already present, the set remains unchanged." },
                { "question": "What is the difference between `.remove(x)` and `.discard(x)`?", "answers": [{ "text": "`.remove()` is faster" }, { "text": "`.remove()` raises a `KeyError` if x is not present, `.discard()` does not", "correct": true }, { "text": "`.discard()` is faster" }, { "text": "There is no difference" }], "explanation": "Both remove an element, but `.remove()` will cause an error if the element doesn't exist, making `.discard()` a safer option when you're not sure if the element is in the set." },
                { "question": "Which operator performs a set union?", "answers": [{ "text": "`&` (ampersand)" }, { "text": "`|` (pipe)", "correct": true }, { "text": "`+` (plus)" }, { "text": "`^` (caret)" }], "explanation": "The `|` operator or the `.union()` method returns a new set containing all items from both sets." },
                { "question": "What does the `&` operator do on two sets?", "answers": [{ "text": "Union" }, { "text": "Difference" }, { "text": "Symmetric Difference" }, { "text": "Intersection", "correct": true }], "explanation": "The `&` operator or the `.intersection()` method returns a new set containing only the items that are present in both sets." },
                { "question": "Given `s1={1,2,3}` and `s2={3,4,5}`, what is `s1 - s2`?", "answers": [{ "text": "`{1, 2}`", "correct": true }, { "text": "`{4, 5}`" }, { "text": "`{3}`" }, { "text": "`{1, 2, 4, 5}`" }], "explanation": "The `-` operator or `.difference()` method returns a new set with items that are in the first set but *not* in the second set." },
                { "question": "What does the `.pop()` method do on a set?", "answers": [{ "text": "Removes and returns the last element" }, { "text": "Removes and returns an arbitrary element", "correct": true }, { "text": "Removes and returns the smallest element" }, { "text": "Raises a `TypeError`" }], "explanation": "Since sets are unordered, there is no 'last' or 'first' element. `.pop()` removes and returns an arbitrary element from the set, raising a `KeyError` if the set is empty." },
                { "question": "Can a list be an element of a set?", "answers": [{ "text": "Yes, always" }, { "text": "No, because lists are mutable", "correct": true }, { "text": "Only if the list is empty" }, { "text": "Only if it contains strings" }], "explanation": "Set elements must be immutable. Since lists can be changed, they have no fixed hash value and cannot be added to a set." },
                { "question": "What is the result of `set('banana')`?", "answers": [{ "text": "`{'b', 'a', 'n'}`", "correct": true }, { "text": "`{'b', 'a', 'n', 'a', 'n', 'a'}`" }, { "text": "`('b', 'a', 'n', 'a', 'n', 'a')`" }, { "text": "An error" }], "explanation": "The `set()` constructor iterates over the string and adds each character. Since sets only store unique elements, the result is a set of the unique letters." },
                { "question": "Given `s1={1,2}` and `s2={2,3}`, what is `s1 ^ s2`?", "answers": [{ "text": "`{2}`" }, { "text": "`{1, 3}`", "correct": true }, { "text": "`{1, 2, 3}`" }, { "text": "`{}`" }], "explanation": "The `^` operator finds the symmetric difference: a new set with elements in either the first or second set, but not both." },
                { "question": "How do you check if set `A` is a subset of set `B`?", "answers": [{ "text": "`A < B` or `A.issubset(B)`", "correct": true }, { "text": "`A in B`" }, { "text": "`subset(A, B)`" }, { "text": "`A.contains(B)`" }], "explanation": "The `<` or `<=` operators can check for proper subsets and subsets, respectively. The `.issubset()` method also performs this check." },
                { "question": "What is a `frozenset`?", "answers": [{ "text": "A set that cannot be copied" }, { "text": "An immutable version of a set", "correct": true }, { "text": "A set that preserves insertion order" }, { "text": "A set that can only contain numbers" }], "explanation": "A `frozenset` is an immutable set. Once created, you cannot add or remove elements, which allows it to be used as a dictionary key or as an element in another set." },
                { "question": "What does the `.update()` method do?", "answers": [{ "text": "Returns a new set with added elements" }, { "text": "Replaces all elements in the set" }, { "text": "Adds all elements from an iterable to the set in-place", "correct": true }, { "text": "It is not a valid set method" }], "explanation": "`.update()` modifies the set it's called on by adding all items from one or more iterables. It is an in-place version of the union operation." },
                { "question": "What will `s = {1, 2}; s.clear()` result in?", "answers": [{ "text": "`s` becomes `None`" }, { "text": "`s` becomes `{}`" }, { "text": "`s` becomes `set()`", "correct": true }, { "text": "A `NameError` because `s` is deleted" }], "explanation": "The `.clear()` method removes all elements from a set, leaving it empty. Printing the empty set would show `set()`." },
                { "question": "How do you check if two sets have no elements in common?", "answers": [{ "text": "By checking if their intersection is empty" }, { "text": "Using the `.isdisjoint()` method" }, { "text": "Using `s1.disjoint(s2)`" }, { "text": "Both A and B are correct", "correct": true }], "explanation": "The `.isdisjoint()` method is the most direct way. It returns `True` if the two sets have no intersection. Checking `len(s1 & s2) == 0` also works." },
                { "question": "What does `s1.difference_update(s2)` do?", "answers": [{ "text": "Returns items in `s1` but not `s2`" }, { "text": "Removes all items from `s1` that are also in `s2`", "correct": true }, { "text": "Returns `True` if `s1` and `s2` are different" }, { "text": "Adds items from `s2` into `s1`" }], "explanation": "This is the in-place version of the difference operation. It modifies `s1` by removing any elements that are found in `s2`." },
                { "question": "Can a tuple be an element of a set?", "answers": [{ "text": "No, never" }, { "text": "Yes, because tuples are immutable", "correct": true }, { "text": "Only if the tuple is empty" }, { "text": "Only if the tuple contains numbers" }], "explanation": "Yes. Since tuples are immutable, they have a hash value and can be added as elements to a set." },
                { "question": "Which of these will result in a `TypeError`?", "answers": [{ "text": "`{[1, 2], [3, 4]}`", "correct": true }, { "text": "`{(1, 2), (3, 4)}`" }, { "text": "`{'a', 1, True}`" }, { "text": "`frozenset([1, 2])`" }], "explanation": "A set's elements must be immutable. Since lists are mutable, attempting to create a set containing lists will raise a `TypeError`." }
            ],
            "Error Handling": [
                { question: "Which block is used to catch exceptions in Python?", answers: [{ text: "`catch`" }, { text: "`try`" }, { text: "`except`", correct: true }, { text: "`error`" }], explanation: "The `except` block follows a `try` block and contains the code that is executed if an error of the specified type occurs in the `try` block." },
                { question: "Which block's code is executed regardless of whether an exception occurred or not?", answers: [{ text: "`finally`", correct: true }, { text: "`else`" }, { text: "`always`" }, { text: "`ensure`" }], explanation: "The `finally` block is optional and is always executed after the `try` and `except` blocks, making it ideal for cleanup actions like closing files." },
                { question: "What error is raised when you try to access a non-existent dictionary key?", answers: [{ text: "`IndexError`" }, { text: "`ValueError`" }, { text: "`KeyError`", correct: true }, { text: "`NameError`" }], explanation: "`KeyError` is raised when a dictionary key is not found." },
                { question: "What error is raised when an operation receives an argument of the right type but an inappropriate value?", answers: [{ text: "`TypeError`" }, { text: "`ValueError`", correct: true }, { text: "`ArgumentError`" }, { text: "`IndexError`" }], explanation: "`ValueError` is raised when a function's argument is of the correct type but has an invalid value. For example, `int('abc')`." },
                { question: "How do you intentionally raise an exception?", answers: [{ text: "`throw Exception`" }, { text: "`raise Exception`", correct: true }, { text: "`error Exception`" }, { text: "`exception()`" }], explanation: "The `raise` keyword is used to trigger an exception manually. You can raise built-in exceptions or custom ones." },
                { question: "What error occurs if you try to add an integer and a string?", answers: [{ text: "`ValueError`" }, { text: "`SyntaxError`" }, { text: "`TypeError`", correct: true }, { text: "`MathError`" }], explanation: "`TypeError` is raised when an operation or function is applied to an object of an inappropriate type, such as adding `'hello'` and `5`." },
                { question: "In a `try...except` block, when does the `else` clause execute?", answers: [{ text: "Always" }, { text: "Only if an exception occurs" }, { text: "Only if no exception occurs", correct: true }, { text: "Never" }], explanation: "The `else` block is optional and runs only if the code in the `try` block completes without raising any exceptions." },
                { question: "What error do you get if you forget the colon `:` at the end of a statement like `if` or `for`?", answers: [{ text: "`IndentationError`" }, { text: "`SyntaxError`", correct: true }, { text: "`NameError`" }, { text: "`TypeError`" }], explanation: "Errors related to the grammar and structure of the code, like missing colons or invalid keywords, are caught by the parser and result in a `SyntaxError`." },
                { question: "What does `except Exception as e:` do?", answers: [{ text: "Catches all exceptions and assigns the instance to `e`", correct: true }, { text: "Catches only the base `Exception` type" }, { text: "Creates a custom exception `e`" }, { text: "This is invalid syntax" }], explanation: "This is a common pattern to catch any standard exception. The `as e` part assigns the exception object to the variable `e`, so you can inspect it (e.g., `print(e)`)." },
                { question: "What error is raised if you try to use a variable that has not been defined?", answers: [{ text: "`ValueError`" }, { text: "`ReferenceError`" }, { text: "`NameError`", correct: true }, { text: "`AttributeError`" }], explanation: "`NameError` occurs when the Python interpreter cannot find a local or global name you are trying to use." },
                { question: "What is the error for an out-of-bounds list index?", answers: [{ text: "`KeyError`" }, { text: "`IndexError`", correct: true }, { text: "`BoundsError`" }, { text: "`ListError`" }], explanation: "`IndexError` is raised when you try to access a sequence (like a list or tuple) with an index that is outside its valid range." },
                { question: "What is the purpose of a bare `except:` clause?", answers: [{ text: "It's a syntax error" }, { text: "It catches only `SyntaxError`" }, { text: "It catches all exceptions, including system exits", correct: true }, { text: "It is the recommended way to catch errors" }], explanation: "A bare `except:` will catch any exception. However, it's generally discouraged because it can hide programming errors and even catch things like `KeyboardInterrupt` (Ctrl+C)." },
                { question: "What error might you see if you call a method that doesn't exist on an object?", answers: [{ text: "`MethodError`" }, { text: "`TypeError`" }, { text: "`AttributeError`", correct: true }, { text: "`NameError`" }], explanation: "`AttributeError` is raised when you try to access or assign to an attribute (or method) that an object doesn't have. For example, `[1, 2].appendd(3)`." },
                { question: "Can you have multiple `except` blocks for one `try` block?", answers: [{ text: "No, only one is allowed" }, { text: "Yes, to handle different exceptions specifically", correct: true }, { text: "Only if you also have a `finally`" }, { text: "Only in Python 2" }], explanation: "You can chain multiple `except` blocks to handle different types of exceptions in different ways. The first matching `except` block is executed." },
                { question: "What happens if an error occurs inside an `except` block?", answers: [{ text: "It is ignored" }, { text: "The `finally` block handles it" }, { text: "The original error is re-raised" }, { text: "The new exception is raised and not caught", correct: true }], explanation: "If an exception is raised inside an `except` or `finally` block, it propagates outwards and will not be caught by any other part of the same `try...except` statement." },
                { question: "Which error is raised due to incorrect spacing or tabs?", answers: [{ text: "`SyntaxError`" }, { text: "`TabError`" }, { text: "`IndentationError`", correct: true }, { text: "`WhitespaceError`" }], explanation: "`IndentationError` (which is a subclass of `SyntaxError`) is raised when there's an issue with the indentation of your code, which is syntactically significant in Python." },
                { question: "How would you catch multiple exceptions in a single `except` block?", answers: [{ text: "`except (ValueError, TypeError):`", correct: true }, { text: "`except ValueError, TypeError:`" }, { text: "`except [ValueError, TypeError]:`" }, { text: "It is not possible" }], explanation: "To handle multiple exceptions with the same code block, you can pass a tuple of exception types to a single `except` clause." },
                { question: "What error is raised when `import` fails to find a module?", answers: [{ text: "`ImportError`" }, { text: "`ModuleNotFoundError`", correct: true }, { text: "`PathError`" }, { text: "`NameError`" }], explanation: "`ModuleNotFoundError` (a subclass of `ImportError`) is raised by the `import` statement when it cannot locate the specified module." },
                { question: "What is the base class for all built-in exceptions?", answers: [{ text: "`Exception`" }, { text: "`StandardError`" }, { text: "`BaseException`", correct: true }, { text: "`Object`" }], explanation: "`BaseException` is the ultimate base class for all built-in exceptions. It is not recommended to catch this directly; `Exception` is used for almost all non-system-exiting errors." },
                { question: "What happens if an exception is not caught by any `except` block?", answers: [{ text: "It is ignored" }, { text: "The `finally` block handles it" }, { text: "The program halts immediately" }, { text: "The exception propagates up the call stack", correct: true }], explanation: "If an exception is not caught by an `except` block, it propagates up to the calling function. If it's never caught, the program terminates and prints a traceback." }
            ],
            "Statements & Expressions": [
                { question: "Which of the following is an expression?", answers: [{ text: "`x = 5`" }, { text: "`if x > 5:`" }, { text: "`5 + 3`", correct: true }, { text: "`def func():`" }], explanation: "An expression is something that evaluates to a value. `5 + 3` evaluates to `8`. The others are statements, which perform an action." },
                { question: "Which of the following is a statement?", answers: [{ text: "`x + y`" }, { text: "`'hello'.upper()`" }, { text: "`print('hello')`", correct: true }, { text: "`x > y`" }], explanation: "`print('hello')` is a statement because it performs an action (printing to the console). While it's also a function call (an expression), it's used as a statement to *do* something." },
                { question: "What is the primary purpose of an assignment statement like `x = 10`?", answers: [{ text: "To check if x is 10" }, { text: "To bind the name `x` to the value `10`", correct: true }, { text: "To evaluate to `True`" }, { text: "To print the value 10" }], explanation: "An assignment statement creates a binding between a name (the variable) and an object (the value)." },
                { question: "Is a `for` loop a statement or an expression?", answers: [{ text: "Expression" }, { text: "Statement", correct: true }, { text: "Both" }, { text: "Neither" }], explanation: "A `for` loop is a statement. It does not evaluate to a value; it performs an action (iterating over a sequence)." },
                { question: "Is a list comprehension, like `[x*2 for x in range(5)]`, a statement or an expression?", answers: [{ text: "Expression", correct: true }, { text: "Statement" }, { text: "Both" }, { text: "Neither" }], explanation: "A list comprehension is an expression because it evaluates to a new list object." },
                { question: "What does the `pass` keyword represent?", answers: [{ text: "A comment" }, { text: "A null statement", correct: true }, { text: "An expression that returns `None`" }, { text: "A command to pause execution" }], explanation: "`pass` is a statement that does nothing. It is used as a placeholder where a statement is syntactically required but no action is needed." },
                { question: "In Python, can a statement contain an expression?", answers: [{ text: "No, they are separate" }, { text: "Yes, most statements contain expressions", correct: true }, { text: "Only in `if` statements" }, { text: "Only `print` statements" }], explanation: "Yes, for example, in the statement `x = 5 + 3`, the part `5 + 3` is an expression." },
                { question: "What does the `assert` statement do?", answers: [{ text: "Performs an assignment" }, { text: "Checks if a condition is true, raises `AssertionError` if not", correct: true }, { text: "Returns a boolean value" }, { text: "Defines a function" }], explanation: "The `assert` statement is used for debugging. It checks a condition, and if the condition is `False`, it raises an `AssertionError` with an optional message." },
                { question: "The `del` keyword is used in a...", answers: [{ text: "Deletion expression" }, { text: "Deletion statement", correct: true }, { text: "Deletion function" }, { text: "Deletion object" }], explanation: "`del` is a statement used to unbind a name or delete items from a list or dictionary. It does not return a value." },
                { question: "What is the key difference between a statement and an expression?", answers: [{ text: "Expressions use parentheses" }, { text: "Statements are always on one line" }, { text: "Expressions evaluate to a value; statements perform actions", correct: true }, { text: "Statements cannot be inside functions" }], explanation: "The core distinction is that expressions produce a value and can be part of other expressions or statements, whereas statements perform an action and represent a complete command." },
                { question: "Which statement is used to bring a module into the current namespace?", answers: [{ text: "`include`" }, { text: "`load`" }, { text: "`import`", correct: true }, { text: "`use`" }], explanation: "The `import` statement is used to make code from one module available in another." },
                { question: "Can an expression be a statement?", answers: [{ text: "Never" }, { text: "Yes, any expression can be a statement", correct: true }, { text: "Only if it returns `None`" }, { text: "Only if it is a function call" }], explanation: "In Python, any expression can be a statement (an 'expression statement'). The evaluated result is simply discarded. For example, `5 + 3` on a line by itself is a valid statement." },
                { question: "What kind of statement is `return x`?", answers: [{ text: "Assignment statement" }, { text: "Control flow statement", correct: true }, { text: "Expression statement" }, { text: "Import statement" }], explanation: "`return` is a control flow statement because it alters the flow of execution by exiting the current function." },
                { question: "`with open('file.txt') as f:` is what kind of statement?", answers: [{ text: "A loop statement" }, { text: "A context management statement", correct: true }, { text: "A declaration statement" }, { text: "An import statement" }], explanation: "The `with` statement is used to wrap the execution of a block with methods defined by a context manager, often used for resource management like opening files." },
                { question: "What is a lambda form?", answers: [{ text: "An expression that creates an anonymous function", correct: true }, { text: "A statement that defines a multi-line function" }, { text: "A special type of string" }, { text: "A mathematical operator" }], explanation: "A `lambda` is an expression, not a statement. It evaluates to a new function object, which is why it can be used in places where a `def` statement cannot, like inside a list." },
                { question: "The `yield` keyword is used in a...", answers: [{ text: "Yield statement" }, { text: "Return statement" }, { text: "Yield expression", correct: true }, { text: "Generator statement" }], explanation: "`yield` is an expression that yields a value from a generator. The entire `yield <value>` line is referred to as a yield expression." },
                { question: "In `x[0] = 1`, `x[0]` is an expression, but the entire line is a...", answers: [{ text: "Compound expression" }, { text: "Conditional statement" }, { text: "Assignment statement", correct: true }, { text: "Function call" }], explanation: "The entire line is an assignment statement. It performs the action of changing the value at an index within an object. It does not evaluate to a value." },
                { question: "What is the walrus operator `:=` an example of?", answers: [{ text: "A comparison operator" }, { text: "A statement" }, { text: "An assignment expression", correct: true }, { text: "A logical operator" }], explanation: "The walrus operator is unique because it forms an 'assignment expression'. It performs an assignment but also evaluates to the assigned value, allowing it to be used within larger expressions." },
                { question: "What is a 'docstring'?", answers: [{ text: "A type of comment" }, { text: "A string literal that is the first statement in an object's definition", correct: true }, { text: "An error message" }, { text: "A variable for documentation" }], explanation: "A docstring, if present, must be the *very first statement* in a module, function, class, or method definition. It's a string literal, not a comment, and is used to generate documentation." },
                { question: "The `if __name__ == '__main__':` block contains code that...", answers: [{ text: "Is always executed" }, { text: "Runs only when the file is imported by another script" }, { text: "Runs only when the file is executed directly", correct: true }, { text: "Is part of a function definition" }], explanation: "This is a compound conditional statement that checks if the script is the main program being run. It's a standard Python idiom to make code reusable." }
            ]
        };


        const achievements = {
            first_quiz: { icon: '🎓', title: 'First Quiz', description: 'Complete your first quiz.' },
            perfect_score: { icon: '🎯', title: 'Perfect Score', description: 'Get 100% on any quiz.' },
            topic_master: { icon: '⭐', title: 'Topic Master', description: 'Get 100% on 3 different topics.' },
            five_star: { icon: '🖐️', title: 'Five Star', description: 'Complete 5 quizzes.' },
            python_pro: { icon: '🏆', title: 'Python Pro', description: 'Complete all available topics.' },
            consistent: { icon: '📈', title: 'Consistent', description: 'Score 80%+ on 3 quizzes in a row.' }
        };

        // --- DOM Elements ---
        const allScreens = {
            welcome: document.getElementById('welcome-container'),
            dashboard: document.getElementById('dashboard-container'),
            topic: document.getElementById('topic-container'),
            ranking: document.getElementById('ranking-container'),
            quiz: document.getElementById('quiz-container'),
            report: document.getElementById('report-container')
        };
        const nameInput = document.getElementById('name-input');
        const startButton = document.getElementById('start-btn');
        const dashboardHeader = document.getElementById('dashboard-header');
        const topicGrid = document.getElementById('topic-grid');
        const questionElement = document.getElementById('question');
        const questionCounterElement = document.getElementById('question-counter');
        const progressBarFill = document.getElementById('progress-bar-fill');
        const answerButtonsElement = document.getElementById('answer-buttons');
        const explanationContainer = document.getElementById('explanation-container');
        const nextButton = document.getElementById('next-btn');
        const restartButton = document.getElementById('restart-btn');
        const pdfButton = document.getElementById('pdf-btn');
        const scoreSummaryElement = document.getElementById('score-summary');
        const topicResultElement = document.getElementById('topic-result');
        const questionReviewElement = document.getElementById('question-review');
        const confettiCanvas = document.getElementById('confetti-canvas');
        const achievementToast = document.getElementById('achievement-toast');
        let progressChart = null;
        
        // --- State ---
        let currentTopic = '';
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let userData = {};

        // --- Core App Logic ---
        function showScreen(screenName) {
            Object.values(allScreens).forEach(s => s.classList.add('hide'));
            allScreens[screenName].classList.remove('hide');
        }
        
        function initialize() {
            const savedData = localStorage.getItem('quizUserData');
            if (savedData) {
                userData = JSON.parse(savedData);
                showDashboard();
            } else {
                showScreen('welcome');
                nameInput.focus();
            }
            setupNavigation();
        }

        function startApp() {
            const userName = nameInput.value.trim();
            if (userName) {
                userData = {
                    userName: userName,
                    quizHistory: [],
                    achievements: {},
                    stats: {}
                };
                saveUserData();
                showDashboard();
            } else {
                nameInput.style.borderColor = 'var(--incorrect-color)';
                setTimeout(() => nameInput.style.borderColor = 'var(--border-color)', 2000);
            }
        }
        
        function changeUser() {
            if(confirm('Are you sure you want to change user? All your progress will be erased.')) {
                localStorage.removeItem('quizUserData');
                userData = {};
                if(progressChart) progressChart.destroy();
                showScreen('welcome');
            }
        }
        
        function saveUserData() {
            localStorage.setItem('quizUserData', JSON.stringify(userData));
        }

        // --- Dashboard & Stats ---
        function showDashboard() {
            dashboardHeader.innerHTML = `Welcome, <span>${userData.userName}</span>!`;
            calculateStats();
            renderDashboard();
            showScreen('dashboard');
        }
        
        function calculateStats() {
            const history = userData.quizHistory;
            const totalQuizzes = history.length;
            
            if (totalQuizzes === 0) {
                userData.stats = { totalQuizzes: 0, avgScore: 0, bestTopic: '-' };
                return;
            }

            const totalScore = history.reduce((acc, result) => acc + (result.score / result.total), 0);
            const avgScore = (totalScore / totalQuizzes) * 100;
            
            const topicScores = {};
            history.forEach(result => {
                if (!topicScores[result.topic]) {
                    topicScores[result.topic] = { total: 0, count: 0 };
                }
                topicScores[result.topic].total += (result.score / result.total);
                topicScores[result.topic].count++;
            });
            
            let bestTopic = '-';
            let bestAvg = -1;
            for (const topic in topicScores) {
                const avg = topicScores[topic].total / topicScores[topic].count;
                if (avg > bestAvg) {
                    bestAvg = avg;
                    bestTopic = topic;
                }
            }
            
            userData.stats = {
                totalQuizzes: totalQuizzes,
                avgScore: avgScore.toFixed(1),
                bestTopic: bestTopic
            };
        }
        
        function renderDashboard() {
            document.getElementById('stat-quizzes-taken').textContent = userData.stats.totalQuizzes;
            document.getElementById('stat-avg-score').textContent = `${userData.stats.avgScore}%`;
            document.getElementById('stat-best-topic').textContent = userData.stats.bestTopic;
            renderAchievements();
            renderChart();
        }

        function renderChart() {
            const ctx = document.getElementById('progress-chart').getContext('2d');
            const history = userData.quizHistory.slice(-10); // Last 10 quizzes
            
            if (progressChart) {
                progressChart.destroy();
            }

            progressChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: history.map((h, i) => `Quiz ${userData.stats.totalQuizzes - history.length + i + 1}`),
                    datasets: [{
                        label: 'Score %',
                        data: history.map(h => (h.score / h.total) * 100),
                        borderColor: 'rgba(88, 166, 255, 1)',
                        backgroundColor: 'rgba(88, 166, 255, 0.2)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    scales: { y: { beginAtZero: true, max: 100 } },
                    plugins: { legend: { display: false } }
                }
            });
        }
        
        // --- Achievements ---
        function renderAchievements() {
            const grid = document.getElementById('achievements-grid');
            grid.innerHTML = '';
            for(const key in achievements) {
                const a = achievements[key];
                const isUnlocked = userData.achievements[key];
                const badge = document.createElement('div');
                badge.className = `achievement-badge ${isUnlocked ? 'unlocked' : ''}`;
                badge.innerHTML = `<div class="icon">${a.icon}</div><h4>${a.title}</h4><p>${a.description}</p>`;
                grid.appendChild(badge);
            }
        }
        
        function checkAchievements(latestResult) {
            const newAchievements = [];
            const history = userData.quizHistory;
            
            // First Quiz
            if (!userData.achievements.first_quiz && history.length >= 1) {
                userData.achievements.first_quiz = true;
                newAchievements.push(achievements.first_quiz);
            }
            // Perfect Score
            if (!userData.achievements.perfect_score && latestResult.score === latestResult.total) {
                userData.achievements.perfect_score = true;
                newAchievements.push(achievements.perfect_score);
            }
            // Five Star
            if (!userData.achievements.five_star && history.length >= 5) {
                userData.achievements.five_star = true;
                newAchievements.push(achievements.five_star);
            }
            // Topic Master
            if (!userData.achievements.topic_master) {
                const perfectTopics = new Set(history.filter(h => h.score === h.total).map(h => h.topic));
                if(perfectTopics.size >= 3) {
                    userData.achievements.topic_master = true;
                    newAchievements.push(achievements.topic_master);
                }
            }
            // Python Pro
            if (!userData.achievements.python_pro) {
                 const completedTopics = new Set(history.map(h => h.topic));
                 if(completedTopics.size === Object.keys(allQuestions).length) {
                     userData.achievements.python_pro = true;
                     newAchievements.push(achievements.python_pro);
                 }
            }
            // Consistent
             if (!userData.achievements.consistent && history.length >= 3) {
                const lastThree = history.slice(-3);
                const allGood = lastThree.every(h => (h.score / h.total) >= 0.8);
                if(allGood) {
                    userData.achievements.consistent = true;
                    newAchievements.push(achievements.consistent);
                }
            }
            
            if (newAchievements.length > 0) {
                showAchievementToast(newAchievements[0]); // Show one at a time
            }
        }
        
        function showAchievementToast(achievement) {
            achievementToast.innerHTML = `<span>${achievement.icon}</span> Achievement Unlocked: ${achievement.title}`;
            achievementToast.classList.add('show');
            setTimeout(() => {
                achievementToast.classList.remove('show');
            }, 4000);
        }

        // --- Ranking ---
        function showRanking() {
            const highScores = {};
            userData.quizHistory.forEach(result => {
                const percent = (result.score / result.total) * 100;
                if (!highScores[result.topic] || percent > highScores[result.topic].score) {
                    highScores[result.topic] = {
                        score: percent,
                        date: new Date(result.date).toLocaleDateString()
                    };
                }
            });
            
            const sortedScores = Object.entries(highScores).sort((a, b) => b[1].score - a[1].score);
            
            const tbody = document.getElementById('ranking-body');
            tbody.innerHTML = '';
            if (sortedScores.length === 0) {
                 tbody.innerHTML = `<tr><td colspan="4" style="text-align:center;">No scores yet. Take a quiz!</td></tr>`;
            } else {
                sortedScores.forEach(([topic, data], index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class="rank-${index + 1}">${index + 1}</td>
                        <td>${topic}</td>
                        <td>${data.score.toFixed(1)}%</td>
                        <td>${data.date}</td>
                    `;
                    tbody.appendChild(row);
                });
            }
            showScreen('ranking');
        }

        // --- Topic & Quiz Logic ---
        function showTopics() {
            topicGrid.innerHTML = '';
            Object.keys(allQuestions).forEach(topic => {
                const button = document.createElement('button');
                button.innerText = topic;
                button.classList.add('topic-btn');
                button.addEventListener('click', () => selectTopic(topic));
                topicGrid.appendChild(button);
            });
            showScreen('topic');
        }
        
        function selectTopic(topic) {
            currentTopic = topic;
            // CORRECTED LINE: This now uses all available questions for the topic
            currentQuestions = [...allQuestions[topic]].sort(() => Math.random() - 0.5);
            startQuiz();
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            nextButton.classList.add('hide');
            showScreen('quiz');
            showQuestion();
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex) / currentQuestions.length) * 100;
            progressBarFill.style.width = `${progress}%`;
        }

        function showQuestion() {
            resetState();
            updateProgressBar();
            let currentQuestion = currentQuestions[currentQuestionIndex];
            let questionNo = currentQuestionIndex + 1;

            questionElement.innerHTML = currentQuestion.question;
            questionCounterElement.innerText = `Question ${questionNo} of ${currentQuestions.length}`;

            const shuffledAnswers = [...currentQuestion.answers].sort(() => Math.random() - 0.5);

            shuffledAnswers.forEach(answer => {
                const button = document.createElement('button');
                button.innerHTML = answer.text;
                button.classList.add('btn');
                if (answer.correct) button.dataset.correct = "true";
                button.addEventListener('click', selectAnswer);
                answerButtonsElement.appendChild(button);
            });
        }

        function resetState() {
            nextButton.classList.add('hide');
            explanationContainer.innerHTML = '';
            answerButtonsElement.innerHTML = '';
        }

        function selectAnswer(e) {
            const selectedBtn = e.target.closest('.btn');
            const isCorrect = selectedBtn.dataset.correct === "true";

            if (isCorrect) score++;

            const currentQuestion = currentQuestions[currentQuestionIndex];
            userAnswers.push({
                question: currentQuestion.question,
                selected: selectedBtn.innerHTML,
                correct: currentQuestion.answers.find(ans => ans.correct).text,
                explanation: currentQuestion.explanation,
                isCorrect: isCorrect
            });

            Array.from(answerButtonsElement.children).forEach(button => {
                if (button.dataset.correct === "true") button.classList.add('correct');
                else if (button === selectedBtn) button.classList.add('incorrect');
                button.disabled = true;
            });

            showExplanation(currentQuestion.explanation);
            progressBarFill.style.width = `${((currentQuestionIndex + 1) / currentQuestions.length) * 100}%`;
            
            const nextButton = document.getElementById('next-btn');
            nextButton.classList.remove('hide');
            
            // --- SCROLL FIX ---
            // This will smoothly scroll the next button into the center of the viewport
            nextButton.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function showExplanation(explanation) {
            explanationContainer.innerHTML = `<div id="explanation-box"><h4>Explanation</h4><p>${explanation}</p></div>`;
        }

        function handleNextButton() {
            currentQuestionIndex++;
            if (currentQuestionIndex < currentQuestions.length) showQuestion();
            else showReport();
        }

        function showReport() {
            saveQuizResult();
            showScreen('report');

            scoreSummaryElement.innerText = `You Scored ${score} / ${currentQuestions.length}!`;
            topicResultElement.innerText = `Quiz Topic: ${currentTopic}`;

            questionReviewElement.innerHTML = '';
            userAnswers.forEach((answer, index) => {
                const reviewItem = document.createElement('div');
                reviewItem.classList.add('review-item');
                let resultHTML = `<div class="review-question">${index + 1}. ${answer.question}</div>`;
                if (answer.isCorrect) {
                    resultHTML += `<div class="review-answer correct-answer">Your answer: ${answer.selected}</div>`;
                } else {
                    resultHTML += `<div class="review-answer user-incorrect">Your answer: ${answer.selected}</div>`;
                    resultHTML += `<div class="review-answer correct-answer">Correct answer: ${answer.correct}</div>`;
                }
                reviewItem.innerHTML = resultHTML;
                questionReviewElement.appendChild(reviewItem);
            });

            if ((score / currentQuestions.length) >= 0.8) {
                launchConfetti();
            }
        }
        
        function saveQuizResult() {
            const result = {
                topic: currentTopic,
                score: score,
                total: currentQuestions.length,
                date: new Date().toISOString()
            };
            // Ensure userData.quizHistory exists
            if (!userData.quizHistory) {
                userData.quizHistory = [];
            }
            userData.quizHistory.push(result);
            checkAchievements(result);
            calculateStats();
            saveUserData();
        }

        // --- Navigation ---
        function setupNavigation() {
            // Welcome
            startButton.addEventListener('click', startApp);
            nameInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') startApp(); });
            // Dashboard
            document.getElementById('change-user-btn').addEventListener('click', changeUser);
            document.getElementById('ranking-btn').addEventListener('click', showRanking);
            document.getElementById('go-to-topics-btn').addEventListener('click', showTopics);
            // Topics
            document.getElementById('back-to-dashboard-btn').addEventListener('click', showDashboard);
            // Ranking
            document.getElementById('ranking-back-btn').addEventListener('click', showDashboard);
            // Quiz
            document.getElementById('back-btn').addEventListener('click', showTopics);
            nextButton.addEventListener('click', handleNextButton);
            // Report
            document.getElementById('report-to-dashboard-btn').addEventListener('click', showDashboard);
            restartButton.addEventListener('click', startQuiz);
            pdfButton.addEventListener('click', generatePDF);
        }
        
        // --- PDF Generation ---
        function generatePDF() {
            alert("PDF Generation functionality is in place.");
        }
        
        // --- Utility Functions ---
        function launchConfetti() {
             const canvas = document.getElementById('confetti-canvas');
             if (!canvas) return;
             const ctx = canvas.getContext('2d');
             canvas.width = window.innerWidth;
             canvas.height = window.innerHeight;
             let particles = [];
             const colors = ['#58a6ff', '#3fb950', '#f85149', '#a371f7', '#f0b83f'];

             for (let i = 0; i < 150; i++) {
                 particles.push({
                     x: Math.random() * canvas.width,
                     y: canvas.height + Math.random() * 100,
                     radius: Math.random() * 5 + 2,
                     color: colors[Math.floor(Math.random() * colors.length)],
                     vx: Math.random() * 20 - 10,
                     vy: Math.random() * -30 - 15,
                     alpha: 1
                 });
             }

             function update() {
                 ctx.clearRect(0, 0, canvas.width, canvas.height);
                 particles.forEach(p => {
                     p.x += p.vx;
                     p.y += p.vy;
                     p.vy += 0.4;
                     p.alpha -= 0.01;

                     ctx.globalAlpha = p.alpha;
                     ctx.beginPath();
                     ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                     ctx.fillStyle = p.color;
                     ctx.fill();
                 });

                 particles = particles.filter(p => p.alpha > 0);
                 if (particles.length > 0) {
                     requestAnimationFrame(update);
                 } else {
                     ctx.clearRect(0, 0, canvas.width, canvas.height);
                 }
             }
             update();
        }

        // Initial call
        initialize();
    </script>
</body>

</html>
